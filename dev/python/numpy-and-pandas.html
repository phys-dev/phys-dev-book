<!DOCTYPE HTML>
<html lang="ru" class="light" dir="ltr">
    <head>
        <!-- Book generated using mdBook -->
        <meta charset="UTF-8">
        <title>Обработка данных - Разработка и применение программного обеспечения в физических исследованиях</title>


        <!-- Custom HTML head -->
        
        <meta name="description" content="">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="theme-color" content="#ffffff">

        <link rel="icon" href="../../favicon.svg">
        <link rel="shortcut icon" href="../../favicon.png">
        <link rel="stylesheet" href="../../css/variables.css">
        <link rel="stylesheet" href="../../css/general.css">
        <link rel="stylesheet" href="../../css/chrome.css">
        <link rel="stylesheet" href="../../css/print.css" media="print">

        <!-- Fonts -->
        <link rel="stylesheet" href="../../FontAwesome/css/font-awesome.css">
        <link rel="stylesheet" href="../../fonts/fonts.css">

        <!-- Highlight.js Stylesheets -->
        <link rel="stylesheet" href="../../highlight.css">
        <link rel="stylesheet" href="../../tomorrow-night.css">
        <link rel="stylesheet" href="../../ayu-highlight.css">

        <!-- Custom theme stylesheets -->

        <!-- MathJax -->
        <script async src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
    </head>
    <body class="sidebar-visible no-js">
    <div id="body-container">
        <!-- Provide site root to javascript -->
        <script>
            var path_to_root = "../../";
            var default_theme = window.matchMedia("(prefers-color-scheme: dark)").matches ? "navy" : "light";
        </script>

        <!-- Work around some values being stored in localStorage wrapped in quotes -->
        <script>
            try {
                var theme = localStorage.getItem('mdbook-theme');
                var sidebar = localStorage.getItem('mdbook-sidebar');

                if (theme.startsWith('"') && theme.endsWith('"')) {
                    localStorage.setItem('mdbook-theme', theme.slice(1, theme.length - 1));
                }

                if (sidebar.startsWith('"') && sidebar.endsWith('"')) {
                    localStorage.setItem('mdbook-sidebar', sidebar.slice(1, sidebar.length - 1));
                }
            } catch (e) { }
        </script>

        <!-- Set the theme before any content is loaded, prevents flash -->
        <script>
            var theme;
            try { theme = localStorage.getItem('mdbook-theme'); } catch(e) { }
            if (theme === null || theme === undefined) { theme = default_theme; }
            var html = document.querySelector('html');
            html.classList.remove('light')
            html.classList.add(theme);
            var body = document.querySelector('body');
            body.classList.remove('no-js')
            body.classList.add('js');
        </script>

        <input type="checkbox" id="sidebar-toggle-anchor" class="hidden">

        <!-- Hide / unhide sidebar before it is displayed -->
        <script>
            var body = document.querySelector('body');
            var sidebar = null;
            var sidebar_toggle = document.getElementById("sidebar-toggle-anchor");
            if (document.body.clientWidth >= 1080) {
                try { sidebar = localStorage.getItem('mdbook-sidebar'); } catch(e) { }
                sidebar = sidebar || 'visible';
            } else {
                sidebar = 'hidden';
            }
            sidebar_toggle.checked = sidebar === 'visible';
            body.classList.remove('sidebar-visible');
            body.classList.add("sidebar-" + sidebar);
        </script>

        <nav id="sidebar" class="sidebar" aria-label="Table of contents">
            <div class="sidebar-scrollbox">
                <ol class="chapter"><li class="chapter-item expanded affix "><a href="../../intro/intro.html">О книге</a></li><li class="chapter-item expanded affix "><a href="../../intro/about-me.html">О себе</a></li><li class="chapter-item expanded affix "><li class="part-title">Ищем помощников</li><li class="chapter-item expanded "><a href="../../ai/intro.html"><strong aria-hidden="true">1.</strong> ИИ для разработки</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../../ai/context.html"><strong aria-hidden="true">1.1.</strong> Контекст и скорость изменений</a></li><li class="chapter-item expanded "><a href="../../ai/develop.html"><strong aria-hidden="true">1.2.</strong> ИИ и разработчик</a></li><li class="chapter-item expanded "><a href="../../ai/basic.html"><strong aria-hidden="true">1.3.</strong> Технические основы</a></li><li class="chapter-item expanded "><a href="../../ai/instruments.html"><strong aria-hidden="true">1.4.</strong> Инструментарий</a></li><li class="chapter-item expanded "><a href="../../ai/qa.html"><strong aria-hidden="true">1.5.</strong> Вопросы и ответы</a></li></ol></li><li class="chapter-item expanded "><a href="../../dev/python/intro.html"><strong aria-hidden="true">2.</strong> Python</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../../dev/python/basics.html"><strong aria-hidden="true">2.1.</strong> Basics</a></li><li class="chapter-item expanded "><a href="../../dev/python/numpy.html"><strong aria-hidden="true">2.2.</strong> Numpy</a></li><li class="chapter-item expanded "><a href="../../dev/python/scipy.html"><strong aria-hidden="true">2.3.</strong> Scipy</a></li><li class="chapter-item expanded "><a href="../../dev/python/matplotlib.html"><strong aria-hidden="true">2.4.</strong> Matplotlib</a></li><li class="chapter-item expanded "><a href="../../dev/python/holo.html"><strong aria-hidden="true">2.5.</strong> Holoviews</a></li><li class="chapter-item expanded "><a href="../../dev/python/requirements.html"><strong aria-hidden="true">2.6.</strong> Requirements</a></li></ol></li><li class="chapter-item expanded "><a href="../../dev/git.html"><strong aria-hidden="true">3.</strong> Git</a></li><li class="chapter-item expanded "><a href="../../dev/docker.html"><strong aria-hidden="true">4.</strong> Docker</a></li><li class="chapter-item expanded affix "><li class="part-title">Загружаем linux</li><li class="chapter-item expanded "><a href="../../linux/intro.html"><strong aria-hidden="true">5.</strong> Основы Linux</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../../linux/booting.html"><strong aria-hidden="true">5.1.</strong> Процесс загрузки</a></li><li class="chapter-item expanded "><a href="../../linux/filesystems.html"><strong aria-hidden="true">5.2.</strong> Файловые системы</a></li><li class="chapter-item expanded "><a href="../../linux/tools.html"><strong aria-hidden="true">5.3.</strong> Инструменты</a></li></ol></li><li class="chapter-item expanded "><a href="../../linux/install-arch-linux.html"><strong aria-hidden="true">6.</strong> Установка Arch Linux</a></li><li class="chapter-item expanded "><a href="../../linux/structure.html"><strong aria-hidden="true">7.</strong> Внутреннее устройство Linux</a></li><li class="chapter-item expanded affix "><li class="part-title">Погружаемся в Python</li><li class="chapter-item expanded "><a href="../../dev/python/init.html"><strong aria-hidden="true">8.</strong> Начало</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../../dev/python/objects.html"><strong aria-hidden="true">8.1.</strong> Объекты и память</a></li><li class="chapter-item expanded "><a href="../../dev/python/collections.html"><strong aria-hidden="true">8.2.</strong> Коллекции</a></li><li class="chapter-item expanded "><a href="../../dev/python/o-notation.html"><strong aria-hidden="true">8.3.</strong> Асимптотическая сложность</a></li></ol></li><li class="chapter-item expanded "><a href="../../dev/python/functions.html"><strong aria-hidden="true">9.</strong> Функции</a></li><li class="chapter-item expanded "><a href="../../dev/python/decorators.html"><strong aria-hidden="true">10.</strong> Декораторы и functools</a></li><li class="chapter-item expanded "><a href="../../dev/python/classes.html"><strong aria-hidden="true">11.</strong> Классы</a></li><li class="chapter-item expanded "><a href="../../dev/python/async.html"><strong aria-hidden="true">12.</strong> Итераторы, генераторы и корутины</a></li><li class="chapter-item expanded affix "><li class="part-title">Изучаем хорошие практики</li><li class="chapter-item expanded "><a href="../../dev/life.html"><strong aria-hidden="true">13.</strong> Жизненный цикл ПО</a></li><li class="chapter-item expanded "><a href="../../dev/python/optimization.html"><strong aria-hidden="true">14.</strong> Оптимизация по времени и памяти</a></li><li class="chapter-item expanded "><a href="../../dev/python/numpy-and-pandas.html" class="active"><strong aria-hidden="true">15.</strong> Обработка данных</a></li><li class="chapter-item expanded "><a href="../../dev/python/visualization/practice.html"><strong aria-hidden="true">16.</strong> Визуализация данных</a></li><li class="chapter-item expanded affix "><li class="part-title">Учимся у других</li><li class="chapter-item expanded "><a href="../../examples/intro.html"><strong aria-hidden="true">17.</strong> Коды и скрипты</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../../examples/kenv.html"><strong aria-hidden="true">17.1.</strong> Уравнение огибающей Капчинского-Владимирского для пучка заряженных частиц</a></li><li class="chapter-item expanded "><a href="../../examples/envelope-optimize.html"><strong aria-hidden="true">17.2.</strong> Оптимизация огибающей пучка заряженных частиц с помощью генетического алгоритма</a></li><li class="chapter-item expanded "><a href="../../examples/redpic.html"><strong aria-hidden="true">17.3.</strong> Релятивистская разностная схема для расчета динамики частиц в сложных электрических и магнитных полях</a></li><li class="chapter-item expanded "><a href="../../examples/async-api.html"><strong aria-hidden="true">17.4.</strong> Асинхронное API для кинотеатра</a></li><li class="chapter-item expanded "><a href="../../examples/matrix-product.html"><strong aria-hidden="true">17.5.</strong> Перемножение матриц</a></li><li class="chapter-item expanded "><a href="../../examples/cadquery/layout.html"><strong aria-hidden="true">17.6.</strong> Схема ускорителя заряженных частиц в CadQuery</a></li></ol></li><li class="chapter-item expanded "><a href="../../resume/literature.html"><strong aria-hidden="true">18.</strong> Литература и статьи</a></li><li class="chapter-item expanded affix "><li class="part-title">Работаем самостоятельно</li><li class="chapter-item expanded "><a href="../../practicum/review-code-task.html"><strong aria-hidden="true">19.</strong> Ищем ошибки в чужом коде</a></li><li class="chapter-item expanded "><a href="../../practicum/markov-chain-task.html"><strong aria-hidden="true">20.</strong> Делаем свою LLM</a></li><li class="chapter-item expanded "><a href="../../practicum/booting-linux-task.html"><strong aria-hidden="true">21.</strong> Установка Linux</a></li><li class="chapter-item expanded "><a href="../../practicum/linux-tools-task.html"><strong aria-hidden="true">22.</strong> Набор упражнений для работы в Linux</a></li><li class="chapter-item expanded "><a href="../../practicum/linux-structure-task.html"><strong aria-hidden="true">23.</strong> Маленькая задачка c Linux</a></li><li class="chapter-item expanded "><a href="../../practicum/python-algo-task.html"><strong aria-hidden="true">24.</strong> Пишем эффективный код</a></li><li class="chapter-item expanded "><a href="../../practicum/kitty-startup-task.html"><strong aria-hidden="true">25.</strong> Деплой стартапа</a></li><li class="chapter-item expanded "><a href="../../practicum/final-project-requirements.html"><strong aria-hidden="true">26.</strong> Итоговый проект</a></li></ol>
            </div>
            <div id="sidebar-resize-handle" class="sidebar-resize-handle">
                <div class="sidebar-resize-indicator"></div>
            </div>
        </nav>

        <!-- Track and set sidebar scroll position -->
        <script>
            var sidebarScrollbox = document.querySelector('#sidebar .sidebar-scrollbox');
            sidebarScrollbox.addEventListener('click', function(e) {
                if (e.target.tagName === 'A') {
                    sessionStorage.setItem('sidebar-scroll', sidebarScrollbox.scrollTop);
                }
            }, { passive: true });
            var sidebarScrollTop = sessionStorage.getItem('sidebar-scroll');
            sessionStorage.removeItem('sidebar-scroll');
            if (sidebarScrollTop) {
                // preserve sidebar scroll position when navigating via links within sidebar
                sidebarScrollbox.scrollTop = sidebarScrollTop;
            } else {
                // scroll sidebar to current active section when navigating via "next/previous chapter" buttons
                var activeSection = document.querySelector('#sidebar .active');
                if (activeSection) {
                    activeSection.scrollIntoView({ block: 'center' });
                }
            }
        </script>

        <div id="page-wrapper" class="page-wrapper">

            <div class="page">
                                <div id="menu-bar-hover-placeholder"></div>
                <div id="menu-bar" class="menu-bar sticky">
                    <div class="left-buttons">
                        <label id="sidebar-toggle" class="icon-button" for="sidebar-toggle-anchor" title="Toggle Table of Contents" aria-label="Toggle Table of Contents" aria-controls="sidebar">
                            <i class="fa fa-bars"></i>
                        </label>
                        <button id="theme-toggle" class="icon-button" type="button" title="Change theme" aria-label="Change theme" aria-haspopup="true" aria-expanded="false" aria-controls="theme-list">
                            <i class="fa fa-paint-brush"></i>
                        </button>
                        <ul id="theme-list" class="theme-popup" aria-label="Themes" role="menu">
                            <li role="none"><button role="menuitem" class="theme" id="light">Light</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="rust">Rust</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="coal">Coal</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="navy">Navy</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="ayu">Ayu</button></li>
                        </ul>
                        <button id="search-toggle" class="icon-button" type="button" title="Search. (Shortkey: s)" aria-label="Toggle Searchbar" aria-expanded="false" aria-keyshortcuts="S" aria-controls="searchbar">
                            <i class="fa fa-search"></i>
                        </button>
                    </div>

                    <h1 class="menu-title">Разработка и применение программного обеспечения в физических исследованиях</h1>

                    <div class="right-buttons">
                        <a href="../../print.html" title="Print this book" aria-label="Print this book">
                            <i id="print-button" class="fa fa-print"></i>
                        </a>
                        <a href="https://github.com/phys-dev/book/" title="Git repository" aria-label="Git repository">
                            <i id="git-repository-button" class="fa fa-github"></i>
                        </a>

                    </div>
                </div>

                <div id="search-wrapper" class="hidden">
                    <form id="searchbar-outer" class="searchbar-outer">
                        <input type="search" id="searchbar" name="searchbar" placeholder="Search this book ..." aria-controls="searchresults-outer" aria-describedby="searchresults-header">
                    </form>
                    <div id="searchresults-outer" class="searchresults-outer hidden">
                        <div id="searchresults-header" class="searchresults-header"></div>
                        <ul id="searchresults">
                        </ul>
                    </div>
                </div>

                <!-- Apply ARIA attributes after the sidebar and the sidebar toggle button are added to the DOM -->
                <script>
                    document.getElementById('sidebar-toggle').setAttribute('aria-expanded', sidebar === 'visible');
                    document.getElementById('sidebar').setAttribute('aria-hidden', sidebar !== 'visible');
                    Array.from(document.querySelectorAll('#sidebar a')).forEach(function(link) {
                        link.setAttribute('tabIndex', sidebar === 'visible' ? 0 : -1);
                    });
                </script>

                <div id="content" class="content">
                    <main>
                        <h1 id="numpy"><a class="header" href="#numpy">NumPy</a></h1>
<p><a href="https://numpy.org/doc/stable/">numpy.org/doc/</a></p>
<p>Библеотека NumPy предоставляет следующие <strong>возможности</strong>:</p>
<ul>
<li>работать с многомерными массивами (включая матрицы)</li>
<li>производить быстрое вычисление математических функций на многомерных массивах</li>
</ul>
<p>Ядром пакета NumPy является объект <a href="https://docs.scipy.org/doc/numpy/reference/generated/numpy.ndarray.html">ndarray</a></p>
<p><strong>Важные отличия</strong> между NumPy arrays и Python sequences:</p>
<ul>
<li>NumPy array имеет фиксированную длину, которая определяется в момент его создания (в отличие от Python lists, которые могут расти динамически)</li>
<li>Элементы в NumPy array должны быть одного типа</li>
<li>Можно выполнять операции непосредственно над NumPy arrays</li>
</ul>
<p><strong>Сильные стороны</strong> NumPy:</p>
<ul>
<li>Vectorization</li>
<li>Broadcasting</li>
</ul>
<p><strong>Мотивирующий пример</strong>
<img src="https://i.imgur.com/z4GzOX6.png" alt="Imgur" /></p>
<pre><code class="language-python">import numpy as np
</code></pre>
<h2 id="Способы-создания-numpy-arrays"><a class="header" href="#Способы-создания-numpy-arrays">Способы создания Numpy arrays</a></h2>
<ul>
<li>Конвертация из Python structures</li>
<li>Генерация с помощью встроенных функций</li>
<li>Чтение с диска</li>
</ul>
<h3 id="Конвертация-из-python-structures"><a class="header" href="#Конвертация-из-python-structures">Конвертация из Python structures</a></h3>
<pre><code class="language-python">np.array([1, 2, 3, 4, 5])
</code></pre>
<pre><code>array([1, 2, 3, 4, 5])
</code></pre>
<p>При конвертации можно задавать тип данных с помощью аргумента <a href="https://docs.scipy.org/doc/numpy/reference/generated/numpy.dtype.html">dtype</a>:</p>
<pre><code class="language-python">np.array([1, 2, 3, 4, 5], dtype=np.float32)
</code></pre>
<pre><code>array([1., 2., 3., 4., 5.], dtype=float32)
</code></pre>
<p>Аналогичное преобразование:</p>
<pre><code class="language-python">np.float32([1, 2, 3, 4, 5])
</code></pre>
<pre><code>array([1., 2., 3., 4., 5.], dtype=float32)
</code></pre>
<h3 id="Генерация-numpy-arrays"><a class="header" href="#Генерация-numpy-arrays">Генерация Numpy arrays</a></h3>
<ul>
<li><a href="https://docs.scipy.org/doc/numpy/reference/generated/numpy.arange.html">arange</a> — аналог range из Python, которому можно передать нецелочисленный шаг</li>
<li><a href="https://docs.scipy.org/doc/numpy/reference/generated/numpy.linspace.html">linspace</a> — способ равномерно разбить отрезок на n-1 интервал</li>
<li><a href="https://docs.scipy.org/doc/numpy/reference/generated/numpy.logspace.html">logspace</a> — способ разбить отрезок по логарифмической шкале</li>
<li><a href="https://docs.scipy.org/doc/numpy/reference/generated/numpy.zeros.html">zeros</a> — создаёт массив заполненный нулями заданной размерности</li>
<li><a href="https://docs.scipy.org/doc/numpy/reference/generated/numpy.ones.html">ones</a> — создаёт массив заполненный единицами заданной размерности</li>
<li><a href="https://docs.scipy.org/doc/numpy/reference/generated/numpy.empty.html">empty</a> — создаёт массив неинициализированный никаким значением заданной размерности</li>
</ul>
<pre><code class="language-python">np.arange(0, 5, 0.5)
</code></pre>
<pre><code>array([0. , 0.5, 1. , 1.5, 2. , 2.5, 3. , 3.5, 4. , 4.5])
</code></pre>
<pre><code class="language-python">np.linspace(0, 5, 11)
</code></pre>
<pre><code>array([0. , 0.5, 1. , 1.5, 2. , 2.5, 3. , 3.5, 4. , 4.5, 5. ])
</code></pre>
<pre><code class="language-python">np.logspace(0, 9, 10, base=2)
</code></pre>
<pre><code>array([  1.,   2.,   4.,   8.,  16.,  32.,  64., 128., 256., 512.])
</code></pre>
<pre><code class="language-python">np.zeros((2, 2))
</code></pre>
<pre><code>array([[0., 0.],
       [0., 0.]])
</code></pre>
<pre><code class="language-python">np.ones((2, 2))
</code></pre>
<pre><code>array([[1., 1.],
       [1., 1.]])
</code></pre>
<pre><code class="language-python">np.empty((2, 2))
</code></pre>
<pre><code>array([[1., 1.],
       [1., 1.]])
</code></pre>
<pre><code class="language-python">np.diag([1,2,3])
</code></pre>
<pre><code>array([[1, 0, 0],
       [0, 2, 0],
       [0, 0, 3]])
</code></pre>
<p>Pазмеры массива храниться в поле <strong>shape</strong>, а количество размерностей - в <strong>ndim</strong></p>
<pre><code class="language-python">array = np.ones((2, 3,))
print('Размерность массива - %s, количество размерностей - %d'%(array.shape, array.ndim))
array
</code></pre>
<pre><code>Размерность массива - (2, 3), количество размерностей - 2





array([[1., 1., 1.],
       [1., 1., 1.]])
</code></pre>
<pre><code class="language-python">## Чему равень ndim и shape в следующих случаях
print(np.diag([1,2,3]).shape, np.diag([1,2,3]).ndim)
print(np.zeros((5, 5, 5)).shape, np.zeros((5, 5, 5)).ndim)
</code></pre>
<pre><code>(3, 3) 2
(5, 5, 5) 3
</code></pre>
<p>Метод <a href="https://docs.scipy.org/doc/numpy/reference/generated/numpy.reshape.html">reshape</a> позволяет преобразовать размеры массива без изменения данных</p>
<pre><code class="language-python">array = np.arange(0, 6, 0.5)
array = array.reshape((2, 6))
array
</code></pre>
<pre><code>array([[0. , 0.5, 1. , 1.5, 2. , 2.5],
       [3. , 3.5, 4. , 4.5, 5. , 5.5]])
</code></pre>
<p>Для того что бы развернуть многомерный массив в вектор, можно воспользоваться функцией <a href="ravel">ravel</a></p>
<pre><code class="language-python">array = np.ravel(array)
array
</code></pre>
<pre><code>array([0. , 0.5, 1. , 1.5, 2. , 2.5, 3. , 3.5, 4. , 4.5, 5. , 5.5])
</code></pre>
<pre><code class="language-python"># Какие будут массивы?
print(np.ravel(np.diag([1,2])))
print(np.reshape(np.diag([1,2]), [1, 4]))
</code></pre>
<pre><code>[1 0 0 2]
[[1 0 0 2]]
</code></pre>
<h2 id="Индексация"><a class="header" href="#Индексация">Индексация</a></h2>
<p>В NumPy работает привычная индексация Python, включая использование отрицательных индексов и срезов</p>
<pre><code class="language-python">print(array[0])
print(array[-1])
print(array[1:-1])
print(array[1:-1:2])
print(array[::-1])
</code></pre>
<pre><code>0.0
5.5
[0.5 1.  1.5 2.  2.5 3.  3.5 4.  4.5 5. ]
[0.5 1.5 2.5 3.5 4.5]
[5.5 5.  4.5 4.  3.5 3.  2.5 2.  1.5 1.  0.5 0. ]
</code></pre>
<pre><code class="language-python">print(array.shape)
</code></pre>
<pre><code>(12,)
</code></pre>
<pre><code class="language-python">print(array[None,0:, None].ndim, array[None,0:, None].shape)
array[None,0:, None]
</code></pre>
<pre><code>3 (1, 12, 1)





array([[[0. ],
        [0.5],
        [1. ],
        [1.5],
        [2. ],
        [2.5],
        [3. ],
        [3.5],
        [4. ],
        [4.5],
        [5. ],
        [5.5]]])
</code></pre>
<p><strong>Замечание</strong>: Индексы и срезы в многомерных массивах не нужно разделять квадратными скобками</p>
<p>т.е. вместо <code>matrix[i][j]</code> нужно использовать <code>matrix[i, j]</code></p>
<p>В качестве индексов можно использовать массивы:</p>
<pre><code class="language-python">array[[0, 2, 4, 6, 8, 10]]
</code></pre>
<pre><code>array([0., 1., 2., 3., 4., 5.])
</code></pre>
<pre><code class="language-python">array[[True, False, True, False, True, False, True, False, True, False, True, False]]
</code></pre>
<pre><code>array([0., 1., 2., 3., 4., 5.])
</code></pre>
<pre><code class="language-python"># Что будет выведено?
x = np.array([[1, 2, 3]])
y = np.array([1, 2, 3])

print (x.shape, y.shape)

print(np.array_equal(x, y))
print(np.array_equal(x, y[None, :]))
</code></pre>
<pre><code>(1, 3) (3,)
False
True
</code></pre>
<pre><code class="language-python">x = np.arange(10)
x
</code></pre>
<pre><code>array([0, 1, 2, 3, 4, 5, 6, 7, 8, 9])
</code></pre>
<pre><code class="language-python">x[(x % 2 == 0) &amp; (x &gt; 5)]
</code></pre>
<pre><code>array([6, 8])
</code></pre>
<pre><code class="language-python">print(x)
y = x[x&gt;5] 
y *= 2
print(y)
print(x)
</code></pre>
<pre><code>[0 1 2 3 4 5 6 7 8 9]
[12 14 16 18]
[0 1 2 3 4 5 6 7 8 9]
</code></pre>
<p>Для копирования в numpy есть метод copy</p>
<pre><code class="language-python">x.copy()
</code></pre>
<pre><code>array([0, 1, 2, 3, 4, 5, 6, 7, 8, 9])
</code></pre>
<h3 id="Чтение-данных-с-помощью-функции-genfromtxt"><a class="header" href="#Чтение-данных-с-помощью-функции-genfromtxt">Чтение данных с помощью функции <a href="https://docs.scipy.org/doc/numpy/reference/generated/numpy.genfromtxt.html#numpy.genfromtxt">genfromtxt</a></a></h3>
<pre><code class="language-python">with open('out.npz', 'wb') as f:
    np.save(f, x)
    
with open('out.npz', 'rb') as f:
    print(f.read())
    
with open('out.npz', 'rb') as f:
    y = np.load(f)
    print(y)    
</code></pre>
<pre><code>b"\x93NUMPY\x01\x00v\x00{'descr': '&lt;i8', 'fortran_order': False, 'shape': (10,), }                                                           \n\x00\x00\x00\x00\x00\x00\x00\x00\x01\x00\x00\x00\x00\x00\x00\x00\x02\x00\x00\x00\x00\x00\x00\x00\x03\x00\x00\x00\x00\x00\x00\x00\x04\x00\x00\x00\x00\x00\x00\x00\x05\x00\x00\x00\x00\x00\x00\x00\x06\x00\x00\x00\x00\x00\x00\x00\x07\x00\x00\x00\x00\x00\x00\x00\x08\x00\x00\x00\x00\x00\x00\x00\t\x00\x00\x00\x00\x00\x00\x00"
[0 1 2 3 4 5 6 7 8 9]
</code></pre>
<pre><code class="language-python">iris = np.genfromtxt('iris_subset.txt', delimiter=', ', names=True, dtype=[('sepal_length_in_cm', 'f8'), 
                                                                          ('sepal_width_in_cm', 'f8'), 
                                                                          ('petal_length_in_cm', 'f8'), 
                                                                          ('petal_width_in_cm', 'f8'),
                                                                          ('class', 'U10')])
iris
</code></pre>
<pre><code>array([(1.000e+00,   1. ,   10.,   121. , 'setosa'),
       (1.000e+00, 314. ,   13.,   121. , 'versicolor'),
       (1.134e+03,   1. ,  103.,  1421. , 'setosa'),
       (1.000e+00, 141. ,   10.,   121. , 'versicolor'),
       (1.440e+02,   1. , 4582., 13481. , 'versicolor'),
       (1.000e+00,  13.3,   10.,   121. , 'versicolor'),
       (1.141e+03,   1. , 1341.,  1231.1, 'setosa'),
       (7.320e+02, 131. ,  139.,    92.1, 'setosa')],
      dtype=[('sepal_length_in_cm', '&lt;f8'), ('sepal_width_in_cm', '&lt;f8'), ('petal_length_in_cm', '&lt;f8'), ('petal_width_in_cm', '&lt;f8'), ('class', '&lt;U10')])
</code></pre>
<p>Значения строки можно запросить по индексу, а значения колонки по её названию</p>
<pre><code class="language-python">print('Описание первого элемента: %s'%iris[0])
print('Значения столбца sepal_length_in_cm: %s'%iris['sepal_length_in_cm'])
</code></pre>
<pre><code>Описание первого элемента: (1., 1., 10., 121., 'setosa')
Значения столбца sepal_length_in_cm: [1.000e+00 1.000e+00 1.134e+03 1.000e+00 1.440e+02 1.000e+00 1.141e+03
 7.320e+02]
</code></pre>
<pre><code class="language-python">sepal_length_setosa = iris['sepal_length_in_cm'][iris['class'] == 'setosa']
sepal_length_versicolor = iris['sepal_length_in_cm'][iris['class'] == 'versicolor']

print('Значения слтобца sepal_length_in_cm\n\tclass setosa: %s\n\tclass versicolor: %s'%(sepal_length_setosa, 
                                                                                         sepal_length_versicolor))
</code></pre>
<pre><code>Значения слтобца sepal_length_in_cm
	class setosa: [1.000e+00 1.134e+03 1.141e+03 7.320e+02]
	class versicolor: [  1.   1. 144.   1.]
</code></pre>
<p>При чтение данных из файла можно пропускать строки в конце и в начале, используя <strong>skip_header</strong> и <strong>skip_footer</strong>, а также брать только нужные столбцы - <strong>usecols</strong></p>
<pre><code class="language-python">iris_class = np.genfromtxt('iris_subset.txt', delimiter=', ', skip_header=1, usecols=4, dtype='U10')
iris_class
</code></pre>
<pre><code>array(['setosa', 'versicolor', 'setosa', 'versicolor', 'versicolor',
       'versicolor', 'setosa', 'setosa'], dtype='&lt;U10')
</code></pre>
<pre><code class="language-python">iris_features = np.genfromtxt('iris_subset.txt', delimiter=', ', skip_header=1, usecols=range(4))
iris_features
</code></pre>
<pre><code>array([[1.0000e+00, 1.0000e+00, 1.0000e+01, 1.2100e+02],
       [1.0000e+00, 3.1400e+02, 1.3000e+01, 1.2100e+02],
       [1.1340e+03, 1.0000e+00, 1.0300e+02, 1.4210e+03],
       [1.0000e+00, 1.4100e+02, 1.0000e+01, 1.2100e+02],
       [1.4400e+02, 1.0000e+00, 4.5820e+03, 1.3481e+04],
       [1.0000e+00, 1.3300e+01, 1.0000e+01, 1.2100e+02],
       [1.1410e+03, 1.0000e+00, 1.3410e+03, 1.2311e+03],
       [7.3200e+02, 1.3100e+02, 1.3900e+02, 9.2100e+01]])
</code></pre>
<pre><code class="language-python">features_setosa = iris_features[iris_class == 'setosa']
features_versicolor = iris_features[iris_class == 'versicolor']
</code></pre>
<p>Операции в NumPy можно производить непосредственно над векторами одинаковой размерности без использования циклов</p>
<p>Например, вычисление поэлементной разности между векторами выглядит следующим образом:</p>
<pre><code class="language-python">sepal_length_versicolor - sepal_length_setosa
</code></pre>
<pre><code>array([    0., -1133.,  -997.,  -731.])
</code></pre>
<p>Аналогчино для многомерных массивов</p>
<pre><code class="language-python">features_versicolor - features_setosa
</code></pre>
<pre><code>array([[ 0.00000e+00,  3.13000e+02,  3.00000e+00,  0.00000e+00],
       [-1.13300e+03,  1.40000e+02, -9.30000e+01, -1.30000e+03],
       [-9.97000e+02,  0.00000e+00,  3.24100e+03,  1.22499e+04],
       [-7.31000e+02, -1.17700e+02, -1.29000e+02,  2.89000e+01]])
</code></pre>
<h2 id="broadcasting"><a class="header" href="#broadcasting"><a href="https://docs.scipy.org/doc/numpy/user/basics.broadcasting.html">Broadcasting</a></a></h2>
<p>Broadcasting снимает правило одной размерности и позволяет производить арифметические операции над массивами разных, но всё-таки созгласованных размерностей. Простейшим примером является умножение вектора на число:</p>
<p><img src="https://i.imgur.com/tE3ZCWG.gif" alt="Imgur" /></p>
<pre><code class="language-python">2*np.arange(1, 4)
</code></pre>
<pre><code>array([2, 4, 6])
</code></pre>
<p>Правило согласования размерностей выражается в одном предложение:</p>
<p><code>In order to broadcast, the size of the trailing axes for both arrays in an operation must either be the same size or one of them must be one</code></p>
<p>Если количество размерностей не совпадают, то к массиву меньшей размерности добавляются фиктивные размерности "слева", например:</p>
<pre><code>a  = np.ones((2,3,4))
b = np.ones(4)
c = a * b # here a.shape=(2,3,4) and b.shape is considered to be (1,1,4)
</code></pre>
<p>Прибавим к каждой строчки матрицы один и тот же вектор:</p>
<p><img src="https://i.imgur.com/VsP2dqT.gif" alt="Imgur" /></p>
<pre><code class="language-python">np.array([[0, 0, 0], [10, 10, 10], [20, 20, 20], [30, 30, 30]]) + np.arange(3)
</code></pre>
<pre><code>array([[ 0,  1,  2],
       [10, 11, 12],
       [20, 21, 22],
       [30, 31, 32]])
</code></pre>
<p>Теперь если мы хотим, проделать тот же трюк но со столбцами, то мы не можем просто добавить вектор состоящий из 4 элементов т.к. в данном случае размеры будут не согласованы</p>
<p><img src="https://i.imgur.com/9LvGoeL.gif" alt="Imgurl" /></p>
<p>Сначала нужно преоброзовать вектор к виду:</p>
<pre><code class="language-python">np.arange(4)[:, np.newaxis]
</code></pre>
<pre><code>array([[0],
       [1],
       [2],
       [3]])
</code></pre>
<p>А затем к нему добавить матрицу:</p>
<pre><code class="language-python">np.arange(4)[:, np.newaxis]+np.array([[0, 0, 0], [10, 10, 10], [20, 20, 20], [30, 30, 30]])
</code></pre>
<pre><code>array([[ 0,  0,  0],
       [11, 11, 11],
       [22, 22, 22],
       [33, 33, 33]])
</code></pre>
<p>Так же в NumPy реализованно много полезных операций для работы с массивами: <a href="https://docs.scipy.org/doc/numpy/reference/generated/numpy.ndarray.min.html">np.min</a>, <a href="https://docs.scipy.org/doc/numpy/reference/generated/numpy.ndarray.max.html">np.max</a>, <a href="https://docs.scipy.org/doc/numpy/reference/generated/numpy.sum.html">np.sum</a>, <a href="https://docs.scipy.org/doc/numpy/reference/generated/numpy.mean.html">np.mean</a> и т.д.</p>
<pre><code class="language-python">print('Среднее значение всех значений класса versicolor: %s'%np.mean(features_versicolor))
print('Среднее значение каждого признака класса versicolor: %s'%np.mean(features_versicolor, axis=1))
</code></pre>
<pre><code>Среднее значение всех значений класса versicolor: 1192.20625
Среднее значение каждого признака класса versicolor: [ 112.25    68.25  4552.      36.325]
</code></pre>
<p>Теперь эффективно посчитаем $\frac{1}{n} \sum\limits_{i=1}^n |x_i-y_i|$ для каждой пары $(x, y)$, где $x$ - вектор признаков объекта из класса setosa, а $y$ - вектор признаков объекта из класса versicolor</p>
<pre><code class="language-python">np.mean(np.abs(features_setosa - features_versicolor[:, np.newaxis]), axis=2)
</code></pre>
<pre><code>array([[7.900000e+01, 7.090000e+02, 9.727750e+02, 2.672250e+02],
       [3.500000e+01, 6.665000e+02, 9.302750e+02, 2.247250e+02],
       [4.518750e+03, 4.382250e+03, 4.121975e+03, 4.637475e+03],
       [3.075000e+00, 6.345750e+02, 8.983500e+02, 2.516500e+02]])
</code></pre>
<h3 id="Операции"><a class="header" href="#Операции">Операции</a></h3>
<pre><code class="language-python">x = np.arange(40).reshape(5, 2, 4)
print(x)
</code></pre>
<pre><code>[[[ 0  1  2  3]
  [ 4  5  6  7]]

 [[ 8  9 10 11]
  [12 13 14 15]]

 [[16 17 18 19]
  [20 21 22 23]]

 [[24 25 26 27]
  [28 29 30 31]]

 [[32 33 34 35]
  [36 37 38 39]]]
</code></pre>
<pre><code class="language-python">print(x.mean())
print(np.mean(x))
</code></pre>
<pre><code>19.5
19.5
</code></pre>
<pre><code class="language-python">x.mean(axis=0)
</code></pre>
<pre><code>array([[16., 17., 18., 19.],
       [20., 21., 22., 23.]])
</code></pre>
<pre><code class="language-python">x.mean(axis=1)
</code></pre>
<pre><code>array([[ 2.,  3.,  4.,  5.],
       [10., 11., 12., 13.],
       [18., 19., 20., 21.],
       [26., 27., 28., 29.],
       [34., 35., 36., 37.]])
</code></pre>
<pre><code class="language-python">x.mean(axis=2)
</code></pre>
<pre><code>array([[ 1.5,  5.5],
       [ 9.5, 13.5],
       [17.5, 21.5],
       [25.5, 29.5],
       [33.5, 37.5]])
</code></pre>
<pre><code class="language-python">x.mean(axis=(0,2))
</code></pre>
<pre><code>array([17.5, 21.5])
</code></pre>
<pre><code class="language-python">x.mean(axis=(0,1,2))
</code></pre>
<pre><code>19.5
</code></pre>
<h3 id="Конкатенация-многомерных-массивов"><a class="header" href="#Конкатенация-многомерных-массивов">Конкатенация многомерных массивов</a></h3>
<p>Конкатенировать несколько массивом можно с помощью функций <strong>np.concatenate, np.hstack, np.vstack, np.dstack</strong></p>
<pre><code class="language-python">x = np.arange(10).reshape(5, 2)
y = np.arange(100, 120).reshape(5, 4)
</code></pre>
<pre><code class="language-python">x
</code></pre>
<pre><code>array([[0, 1],
       [2, 3],
       [4, 5],
       [6, 7],
       [8, 9]])
</code></pre>
<pre><code class="language-python">y
</code></pre>
<pre><code>array([[100, 101, 102, 103],
       [104, 105, 106, 107],
       [108, 109, 110, 111],
       [112, 113, 114, 115],
       [116, 117, 118, 119]])
</code></pre>
<pre><code class="language-python">np.hstack((x, y))
</code></pre>
<pre><code>array([[  0,   1, 100, 101, 102, 103],
       [  2,   3, 104, 105, 106, 107],
       [  4,   5, 108, 109, 110, 111],
       [  6,   7, 112, 113, 114, 115],
       [  8,   9, 116, 117, 118, 119]])
</code></pre>
<pre><code class="language-python">x = np.ones([2, 3])
y = np.zeros([2, 2])
</code></pre>
<pre><code class="language-python"># Какой будет результат
print(np.hstack((x,y)).shape)
print(np.vstack((x,y)).shape)
</code></pre>
<pre><code>(2, 5)



---------------------------------------------------------------------------

ValueError                                Traceback (most recent call last)

Cell In[54], line 3
      1 # Какой будет результат
      2 print(np.hstack((x,y)).shape)
----&gt; 3 print(np.vstack((x,y)).shape)


File /opt/anaconda3/lib/python3.12/site-packages/numpy/core/shape_base.py:289, in vstack(tup, dtype, casting)
    287 if not isinstance(arrs, list):
    288     arrs = [arrs]
--&gt; 289 return _nx.concatenate(arrs, 0, dtype=dtype, casting=casting)


ValueError: all the input array dimensions except for the concatenation axis must match exactly, but along dimension 1, the array at index 0 has size 3 and the array at index 1 has size 2
</code></pre>
<pre><code class="language-python">p = np.arange(1).reshape([1, 1, 1, 1])
p
</code></pre>
<pre><code>array([[[[0]]]])
</code></pre>
<pre><code class="language-python">print("vstack: ", np.vstack((p, p)).shape)
print("hstack: ", np.hstack((p, p)).shape)
print("dstack: ", np.dstack((p, p)).shape)
print("concatenate: ", np.concatenate((p, p), axis=3).shape)
</code></pre>
<pre><code>vstack:  (2, 1, 1, 1)
hstack:  (1, 2, 1, 1)
dstack:  (1, 1, 2, 1)
concatenate:  (1, 1, 1, 2)
</code></pre>
<h3 id="Типы"><a class="header" href="#Типы">Типы</a></h3>
<pre><code class="language-python">x = [1, 2, 70000]
</code></pre>
<pre><code class="language-python">np.array(x, dtype=np.float32)
</code></pre>
<pre><code>array([1.e+00, 2.e+00, 7.e+04], dtype=float32)
</code></pre>
<pre><code class="language-python">np.array(x, dtype=np.uint16)
</code></pre>
<pre><code>/tmp/ipykernel_984447/2771282312.py:1: DeprecationWarning: NumPy will stop allowing conversion of out-of-bound Python integers to integer arrays.  The conversion of 70000 to uint16 will fail in the future.
For the old behavior, usually:
    np.array(value).astype(dtype)
will give the desired result (the cast overflows).
  np.array(x, dtype=np.uint16)





array([   1,    2, 4464], dtype=uint16)
</code></pre>
<pre><code class="language-python">np.array(x, dtype=np.unicode_)
</code></pre>
<pre><code>array(['1', '2', '70000'], dtype='&lt;U5')
</code></pre>
<h3 id="Функциональное-программирование"><a class="header" href="#Функциональное-программирование">Функциональное программирование</a></h3>
<pre><code class="language-python">def f(value):
    return np.sqrt(value)
</code></pre>
<pre><code class="language-python">print(np.apply_along_axis(f, 0, np.arange(10)))
</code></pre>
<pre><code>[0.         1.         1.41421356 1.73205081 2.         2.23606798
 2.44948974 2.64575131 2.82842712 3.        ]
</code></pre>
<pre><code class="language-python">vf = np.vectorize(f)
</code></pre>
<pre><code class="language-python">%%timeit 
vf(np.arange(100000))
</code></pre>
<pre><code>146 ms ± 2.4 ms per loop (mean ± std. dev. of 7 runs, 10 loops each)
</code></pre>
<pre><code class="language-python">%%timeit 
np.apply_along_axis(f, 0, np.arange(100000)) 
</code></pre>
<pre><code>1.89 ms ± 31.9 μs per loop (mean ± std. dev. of 7 runs, 1,000 loops each)
</code></pre>
<pre><code class="language-python">%%timeit 
np.array([f(v) for v in np.arange(100000)])
</code></pre>
<pre><code>129 ms ± 861 μs per loop (mean ± std. dev. of 7 runs, 10 loops each)
</code></pre>
<h1 id="pandas"><a class="header" href="#pandas">Pandas</a></h1>
<p><a href="https://pandas.pydata.org/docs/">pandas.pydata.org/docs/</a></p>
<p>Подключаем библиотеку Pandas, предназначенную для считывания, предобработки и быстрой визуализации данных, а также для простой аналитики.</p>
<pre><code class="language-python">import pandas as pd
df = pd.read_csv("titanic.csv", sep='\t')
</code></pre>
<pre><code class="language-python">df.head(3)
</code></pre>
<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }
<pre><code>.dataframe tbody tr th {
    vertical-align: top;
}

.dataframe thead th {
    text-align: right;
}
</code></pre>
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>PassengerId</th>
      <th>Survived</th>
      <th>Pclass</th>
      <th>Name</th>
      <th>Sex</th>
      <th>Age</th>
      <th>SibSp</th>
      <th>Parch</th>
      <th>Ticket</th>
      <th>Fare</th>
      <th>Cabin</th>
      <th>Embarked</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>1</td>
      <td>0</td>
      <td>3</td>
      <td>Braund, Mr. Owen Harris</td>
      <td>male</td>
      <td>22.0</td>
      <td>1</td>
      <td>0</td>
      <td>A/5 21171</td>
      <td>7.2500</td>
      <td>NaN</td>
      <td>S</td>
    </tr>
    <tr>
      <th>1</th>
      <td>2</td>
      <td>1</td>
      <td>1</td>
      <td>Cumings, Mrs. John Bradley (Florence Briggs Th...</td>
      <td>female</td>
      <td>38.0</td>
      <td>1</td>
      <td>0</td>
      <td>PC 17599</td>
      <td>71.2833</td>
      <td>C85</td>
      <td>C</td>
    </tr>
    <tr>
      <th>2</th>
      <td>3</td>
      <td>1</td>
      <td>3</td>
      <td>Heikkinen, Miss. Laina</td>
      <td>female</td>
      <td>26.0</td>
      <td>0</td>
      <td>0</td>
      <td>STON/O2. 3101282</td>
      <td>7.9250</td>
      <td>NaN</td>
      <td>S</td>
    </tr>
  </tbody>
</table>
</div>
<pre><code class="language-python">view = df[df['Sex'] == 'female']
</code></pre>
<pre><code class="language-python">list(((df['Sex'] == 'female') &amp; (df['Age'] &gt; 30)).index)
</code></pre>
<pre><code>[0,
 1,
 2,
 3,
 4,
 5,
 6,
 7,
 8,
 9,
 10,
 11,
 12,
 13,
 14,
 15,
 16,
 17,
 18,
 19,
 20,
 21,
 22,
 23,
 24,
 25,
 26,
 27,
 28,
 29,
 30,
 31,
 32,
 33,
 34,
 35,
 36,
 37,
 38,
 39,
 40,
 41,
 42,
 43,
 44,
 45,
 46,
 47,
 48,
 49,
 50,
 51,
 52,
 53,
 54,
 55,
 56,
 57,
 58,
 59,
 60,
 61,
 62,
 63,
 64,
 65,
 66,
 67,
 68,
 69,
 70,
 71,
 72,
 73,
 74,
 75,
 76,
 77,
 78,
 79,
 80,
 81,
 82,
 83,
 84,
 85,
 86,
 87,
 88,
 89,
 90,
 91,
 92,
 93,
 94,
 95,
 96,
 97,
 98,
 99,
 100,
 101,
 102,
 103,
 104,
 105,
 106,
 107,
 108,
 109,
 110,
 111,
 112,
 113,
 114,
 115,
 116,
 117,
 118,
 119,
 120,
 121,
 122,
 123,
 124,
 125,
 126,
 127,
 128,
 129,
 130,
 131,
 132,
 133,
 134,
 135,
 136,
 137,
 138,
 139,
 140,
 141,
 142,
 143,
 144,
 145,
 146,
 147,
 148,
 149,
 150,
 151,
 152,
 153,
 154,
 155]
</code></pre>
<pre><code class="language-python">df[(df['Sex'] == 'female') &amp; (df['Age'] &gt; 30)].index
</code></pre>
<pre><code>Index([1, 3, 11, 15, 18, 25, 40, 52, 61, 85, 98, 123, 132], dtype='int64')
</code></pre>
<pre><code class="language-python">df.drop(index=(df[(df['Sex'] == 'female') &amp; (df['Age'] &gt; 30)].index),axis=1, inplace=True)
</code></pre>
<pre><code class="language-python">df.loc[78]
</code></pre>
<pre><code>PassengerId                               79
Survived                                   1
Pclass                                     2
Name           Caldwell, Master. Alden Gates
Sex                                     male
Age                                     0.83
SibSp                                      0
Parch                                      2
Ticket                                248738
Fare                                    29.0
Cabin                                    NaN
Embarked                                   S
Name: 78, dtype: object
</code></pre>
<pre><code class="language-python">df.iloc[0]
</code></pre>
<pre><code>PassengerId                          1
Survived                             0
Pclass                               3
Name           Braund, Mr. Owen Harris
Sex                               male
Age                               22.0
SibSp                                1
Parch                                0
Ticket                       A/5 21171
Fare                              7.25
Cabin                              NaN
Embarked                             S
Name: 0, dtype: object
</code></pre>
<pre><code class="language-python">df.describe()
</code></pre>
<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }
<pre><code>.dataframe tbody tr th {
    vertical-align: top;
}

.dataframe thead th {
    text-align: right;
}
</code></pre>
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>PassengerId</th>
      <th>Survived</th>
      <th>Pclass</th>
      <th>Age</th>
      <th>SibSp</th>
      <th>Parch</th>
      <th>Fare</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>count</th>
      <td>143.000000</td>
      <td>143.000000</td>
      <td>143.000000</td>
      <td>113.000000</td>
      <td>143.000000</td>
      <td>143.000000</td>
      <td>143.000000</td>
    </tr>
    <tr>
      <th>mean</th>
      <td>80.902098</td>
      <td>0.307692</td>
      <td>2.461538</td>
      <td>26.702035</td>
      <td>0.601399</td>
      <td>0.391608</td>
      <td>27.526018</td>
    </tr>
    <tr>
      <th>std</th>
      <td>44.536473</td>
      <td>0.463161</td>
      <td>0.776134</td>
      <td>14.483237</td>
      <td>1.075593</td>
      <td>0.813919</td>
      <td>40.406013</td>
    </tr>
    <tr>
      <th>min</th>
      <td>1.000000</td>
      <td>0.000000</td>
      <td>1.000000</td>
      <td>0.830000</td>
      <td>0.000000</td>
      <td>0.000000</td>
      <td>6.750000</td>
    </tr>
    <tr>
      <th>25%</th>
      <td>43.500000</td>
      <td>0.000000</td>
      <td>2.000000</td>
      <td>19.000000</td>
      <td>0.000000</td>
      <td>0.000000</td>
      <td>7.925000</td>
    </tr>
    <tr>
      <th>50%</th>
      <td>81.000000</td>
      <td>0.000000</td>
      <td>3.000000</td>
      <td>24.000000</td>
      <td>0.000000</td>
      <td>0.000000</td>
      <td>13.000000</td>
    </tr>
    <tr>
      <th>75%</th>
      <td>118.500000</td>
      <td>1.000000</td>
      <td>3.000000</td>
      <td>33.000000</td>
      <td>1.000000</td>
      <td>0.000000</td>
      <td>29.597900</td>
    </tr>
    <tr>
      <th>max</th>
      <td>156.000000</td>
      <td>1.000000</td>
      <td>3.000000</td>
      <td>71.000000</td>
      <td>5.000000</td>
      <td>5.000000</td>
      <td>263.000000</td>
    </tr>
  </tbody>
</table>
</div>
<pre><code class="language-python">df[["Sex", "Cabin"]].describe()
</code></pre>
<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }
<pre><code>.dataframe tbody tr th {
    vertical-align: top;
}

.dataframe thead th {
    text-align: right;
}
</code></pre>
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>Sex</th>
      <th>Cabin</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>count</th>
      <td>143</td>
      <td>25</td>
    </tr>
    <tr>
      <th>unique</th>
      <td>2</td>
      <td>23</td>
    </tr>
    <tr>
      <th>top</th>
      <td>male</td>
      <td>C23 C25 C27</td>
    </tr>
    <tr>
      <th>freq</th>
      <td>100</td>
      <td>2</td>
    </tr>
  </tbody>
</table>
</div>
<h3 id="Срезы-в-dataframe"><a class="header" href="#Срезы-в-dataframe">Срезы в DataFrame</a></h3>
<h3 id="Индексация-1"><a class="header" href="#Индексация-1">Индексация</a></h3>
<pre><code class="language-python">df.sort_values("Age", inplace=True)
</code></pre>
<pre><code class="language-python">df.head(3)
</code></pre>
<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }
<pre><code>.dataframe tbody tr th {
    vertical-align: top;
}

.dataframe thead th {
    text-align: right;
}
</code></pre>
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>PassengerId</th>
      <th>Survived</th>
      <th>Pclass</th>
      <th>Name</th>
      <th>Sex</th>
      <th>Age</th>
      <th>SibSp</th>
      <th>Parch</th>
      <th>Ticket</th>
      <th>Fare</th>
      <th>Cabin</th>
      <th>Embarked</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>78</th>
      <td>79</td>
      <td>1</td>
      <td>2</td>
      <td>Caldwell, Master. Alden Gates</td>
      <td>male</td>
      <td>0.83</td>
      <td>0</td>
      <td>2</td>
      <td>248738</td>
      <td>29.000</td>
      <td>NaN</td>
      <td>S</td>
    </tr>
    <tr>
      <th>7</th>
      <td>8</td>
      <td>0</td>
      <td>3</td>
      <td>Palsson, Master. Gosta Leonard</td>
      <td>male</td>
      <td>2.00</td>
      <td>3</td>
      <td>1</td>
      <td>349909</td>
      <td>21.075</td>
      <td>NaN</td>
      <td>S</td>
    </tr>
    <tr>
      <th>119</th>
      <td>120</td>
      <td>0</td>
      <td>3</td>
      <td>Andersson, Miss. Ellis Anna Maria</td>
      <td>female</td>
      <td>2.00</td>
      <td>4</td>
      <td>2</td>
      <td>347082</td>
      <td>31.275</td>
      <td>NaN</td>
      <td>S</td>
    </tr>
  </tbody>
</table>
</div>
<pre><code class="language-python">df.iloc[78]
</code></pre>
<pre><code>PassengerId                              67
Survived                                  1
Pclass                                    2
Name           Nye, Mrs. (Elizabeth Ramell)
Sex                                  female
Age                                    29.0
SibSp                                     0
Parch                                     0
Ticket                           C.A. 29395
Fare                                   10.5
Cabin                                   F33
Embarked                                  S
Name: 66, dtype: object
</code></pre>
<pre><code class="language-python">df.loc[78]
</code></pre>
<pre><code>PassengerId                               79
Survived                                   1
Pclass                                     2
Name           Caldwell, Master. Alden Gates
Sex                                     male
Age                                     0.83
SibSp                                      0
Parch                                      2
Ticket                                248738
Fare                                    29.0
Cabin                                    NaN
Embarked                                   S
Name: 78, dtype: object
</code></pre>
<pre><code class="language-python">df.loc[[78, 79, 100], ["Age", "Cabin"]]
</code></pre>
<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }
<pre><code>.dataframe tbody tr th {
    vertical-align: top;
}

.dataframe thead th {
    text-align: right;
}
</code></pre>
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>Age</th>
      <th>Cabin</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>78</th>
      <td>0.83</td>
      <td>NaN</td>
    </tr>
    <tr>
      <th>79</th>
      <td>30.00</td>
      <td>NaN</td>
    </tr>
    <tr>
      <th>100</th>
      <td>28.00</td>
      <td>NaN</td>
    </tr>
  </tbody>
</table>
</div>
<p>Если хотите модифицировать данные среза, не меняя основной таблицы, нужно сделать копию.</p>
<pre><code class="language-python">df_slice_copy = df.loc[[78, 79, 100], ["Age", "Cabin"]].copy()
</code></pre>
<pre><code class="language-python">df_slice_copy[:] = 3
</code></pre>
<pre><code class="language-python">df_slice_copy
</code></pre>
<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }
<pre><code>.dataframe tbody tr th {
    vertical-align: top;
}

.dataframe thead th {
    text-align: right;
}
</code></pre>
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>Age</th>
      <th>Cabin</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>78</th>
      <td>3.0</td>
      <td>3</td>
    </tr>
    <tr>
      <th>79</th>
      <td>3.0</td>
      <td>3</td>
    </tr>
    <tr>
      <th>100</th>
      <td>3.0</td>
      <td>3</td>
    </tr>
  </tbody>
</table>
</div>
<p>Если хотите менять основную таблицу, то используйте loc</p>
<pre><code class="language-python">df.head(3)
</code></pre>
<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }
<pre><code>.dataframe tbody tr th {
    vertical-align: top;
}

.dataframe thead th {
    text-align: right;
}
</code></pre>
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>PassengerId</th>
      <th>Survived</th>
      <th>Pclass</th>
      <th>Name</th>
      <th>Sex</th>
      <th>Age</th>
      <th>SibSp</th>
      <th>Parch</th>
      <th>Ticket</th>
      <th>Fare</th>
      <th>Cabin</th>
      <th>Embarked</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>78</th>
      <td>79</td>
      <td>1</td>
      <td>2</td>
      <td>Caldwell, Master. Alden Gates</td>
      <td>male</td>
      <td>0.83</td>
      <td>0</td>
      <td>2</td>
      <td>248738</td>
      <td>29.000</td>
      <td>NaN</td>
      <td>S</td>
    </tr>
    <tr>
      <th>7</th>
      <td>8</td>
      <td>0</td>
      <td>3</td>
      <td>Palsson, Master. Gosta Leonard</td>
      <td>male</td>
      <td>2.00</td>
      <td>3</td>
      <td>1</td>
      <td>349909</td>
      <td>21.075</td>
      <td>NaN</td>
      <td>S</td>
    </tr>
    <tr>
      <th>119</th>
      <td>120</td>
      <td>0</td>
      <td>3</td>
      <td>Andersson, Miss. Ellis Anna Maria</td>
      <td>female</td>
      <td>2.00</td>
      <td>4</td>
      <td>2</td>
      <td>347082</td>
      <td>31.275</td>
      <td>NaN</td>
      <td>S</td>
    </tr>
  </tbody>
</table>
</div>
<pre><code class="language-python">some_slice = df["Age"].isin([20, 25,30])
df.loc[some_slice, "Fare"] = df.loc[some_slice, "Fare"] * 10
</code></pre>
<p>Так лучше не делать:</p>
<pre><code class="language-python">slice_df = df[some_slice]
slice_df["Fare"] = slice_df["Fare"] * 10
</code></pre>
<pre><code>/tmp/ipykernel_984447/1355601167.py:2: SettingWithCopyWarning: 
A value is trying to be set on a copy of a slice from a DataFrame.
Try using .loc[row_indexer,col_indexer] = value instead

See the caveats in the documentation: https://pandas.pydata.org/pandas-docs/stable/user_guide/indexing.html#returning-a-view-versus-a-copy
  slice_df["Fare"] = slice_df["Fare"] * 10
</code></pre>
<p>Получить значения только нужных столбцов можно передав в <code>[]</code> название столбца (или список названий столбцов).</p>
<p><strong>Замечание:</strong> Если передаём название одного столбца, то получаем объект класса <a href="http://pandas.pydata.org/pandas-docs/stable/generated/pandas.Series.html">pandas.Series</a>, а если список названий столбцов, то получаем  <a href="http://pandas.pydata.org/pandas-docs/stable/generated/pandas.DataFrame.html">pandas.DataFrame</a>, чтобы получить <a href="https://docs.scipy.org/doc/numpy/reference/generated/numpy.array.html">numpy.array</a> обратитесь к полю <strong>values</strong>.</p>
<p>Series и DataFrame имеют много общих методов</p>
<pre><code class="language-python">df["Age"].head(5)
</code></pre>
<pre><code>78     0.83
7      2.00
119    2.00
16     2.00
43     3.00
Name: Age, dtype: float64
</code></pre>
<pre><code class="language-python">df[["Age"]].head(5)
</code></pre>
<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }
<pre><code>.dataframe tbody tr th {
    vertical-align: top;
}

.dataframe thead th {
    text-align: right;
}
</code></pre>
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>Age</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>78</th>
      <td>0.83</td>
    </tr>
    <tr>
      <th>7</th>
      <td>2.00</td>
    </tr>
    <tr>
      <th>119</th>
      <td>2.00</td>
    </tr>
    <tr>
      <th>16</th>
      <td>2.00</td>
    </tr>
    <tr>
      <th>43</th>
      <td>3.00</td>
    </tr>
  </tbody>
</table>
</div>
<h3 id="pdseries"><a class="header" href="#pdseries">pd.Series</a></h3>
<p>Одномерные срезы датафреймов имеют тип pd.Series.</p>
<p>Можно получить np.array из pd.Series, но вы не хотите этого делать.</p>
<pre><code class="language-python">df["Age"].head(5).values
</code></pre>
<pre><code>array([0.83, 2.  , 2.  , 2.  , 3.  ])
</code></pre>
<p>Можно достать и индекс</p>
<pre><code class="language-python">df["Age"].head(5).index
</code></pre>
<pre><code>Index([78, 7, 119, 16, 43], dtype='int64')
</code></pre>
<p>Создаются они примерно также, как np.array. Опционально указывается индекс</p>
<pre><code class="language-python">pd.Series([1, 2, 3], index=["Red", "Green", "Blue"])
</code></pre>
<pre><code>Red      1
Green    2
Blue     3
dtype: int64
</code></pre>
<pre><code class="language-python">pd.Series(1, index=["Red", "Green", "Blue"])
</code></pre>
<pre><code>Red      1
Green    1
Blue     1
dtype: int64
</code></pre>
<pre><code class="language-python">pd.Series([1, 2, 3], index=["Red", "Green", "Blue"])
</code></pre>
<pre><code>Red      1
Green    2
Blue     3
dtype: int64
</code></pre>
<p>Series можно перевести в DataFrame</p>
<pre><code class="language-python">s = pd.Series([1, 2, 3], index=["Red", "Green", "Blue"])
s.to_frame("Values")
</code></pre>
<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }
<pre><code>.dataframe tbody tr th {
    vertical-align: top;
}

.dataframe thead th {
    text-align: right;
}
</code></pre>
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>Values</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>Red</th>
      <td>1</td>
    </tr>
    <tr>
      <th>Green</th>
      <td>2</td>
    </tr>
    <tr>
      <th>Blue</th>
      <td>3</td>
    </tr>
  </tbody>
</table>
</div>
<pre><code class="language-python">s.loc["Red"]
</code></pre>
<pre><code>1
</code></pre>
<pre><code class="language-python">s.iloc[0]
</code></pre>
<pre><code>1
</code></pre>
<h3 id="Объединение-таблиц"><a class="header" href="#Объединение-таблиц"><a href="http://pandas.pydata.org/pandas-docs/stable/merging.html">Объединение таблиц</a></a></h3>
<pre><code class="language-python">df1 = df[["Age", "Parch"]].copy()
df2 = df[["Ticket", "Fare"]].copy()
</code></pre>
<pre><code class="language-python">df1.join(df2).head(5)
</code></pre>
<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }
<pre><code>.dataframe tbody tr th {
    vertical-align: top;
}

.dataframe thead th {
    text-align: right;
}
</code></pre>
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>Age</th>
      <th>Parch</th>
      <th>Ticket</th>
      <th>Fare</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>78</th>
      <td>0.83</td>
      <td>2</td>
      <td>248738</td>
      <td>29.0000</td>
    </tr>
    <tr>
      <th>7</th>
      <td>2.00</td>
      <td>1</td>
      <td>349909</td>
      <td>21.0750</td>
    </tr>
    <tr>
      <th>119</th>
      <td>2.00</td>
      <td>2</td>
      <td>347082</td>
      <td>31.2750</td>
    </tr>
    <tr>
      <th>16</th>
      <td>2.00</td>
      <td>1</td>
      <td>382652</td>
      <td>29.1250</td>
    </tr>
    <tr>
      <th>43</th>
      <td>3.00</td>
      <td>2</td>
      <td>SC/Paris 2123</td>
      <td>41.5792</td>
    </tr>
  </tbody>
</table>
</div>
<pre><code class="language-python">df1 = df[["Age", "Parch", "PassengerId"]].copy()
df2 = df[["Ticket", "Fare", "PassengerId"]].copy()
</code></pre>
<pre><code class="language-python">pd.merge(df1, df2, on=["PassengerId"]).head(5)
</code></pre>
<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }
<pre><code>.dataframe tbody tr th {
    vertical-align: top;
}

.dataframe thead th {
    text-align: right;
}
</code></pre>
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>Age</th>
      <th>Parch</th>
      <th>PassengerId</th>
      <th>Ticket</th>
      <th>Fare</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>0.83</td>
      <td>2</td>
      <td>79</td>
      <td>248738</td>
      <td>29.0000</td>
    </tr>
    <tr>
      <th>1</th>
      <td>2.00</td>
      <td>1</td>
      <td>8</td>
      <td>349909</td>
      <td>21.0750</td>
    </tr>
    <tr>
      <th>2</th>
      <td>2.00</td>
      <td>2</td>
      <td>120</td>
      <td>347082</td>
      <td>31.2750</td>
    </tr>
    <tr>
      <th>3</th>
      <td>2.00</td>
      <td>1</td>
      <td>17</td>
      <td>382652</td>
      <td>29.1250</td>
    </tr>
    <tr>
      <th>4</th>
      <td>3.00</td>
      <td>2</td>
      <td>44</td>
      <td>SC/Paris 2123</td>
      <td>41.5792</td>
    </tr>
  </tbody>
</table>
</div>
<pre><code class="language-python">pd.merge(df1, df2, on=["PassengerId"], how="inner").head(5)
</code></pre>
<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }
<pre><code>.dataframe tbody tr th {
    vertical-align: top;
}

.dataframe thead th {
    text-align: right;
}
</code></pre>
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>Age</th>
      <th>Parch</th>
      <th>PassengerId</th>
      <th>Ticket</th>
      <th>Fare</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>0.83</td>
      <td>2</td>
      <td>79</td>
      <td>248738</td>
      <td>29.0000</td>
    </tr>
    <tr>
      <th>1</th>
      <td>2.00</td>
      <td>1</td>
      <td>8</td>
      <td>349909</td>
      <td>21.0750</td>
    </tr>
    <tr>
      <th>2</th>
      <td>2.00</td>
      <td>2</td>
      <td>120</td>
      <td>347082</td>
      <td>31.2750</td>
    </tr>
    <tr>
      <th>3</th>
      <td>2.00</td>
      <td>1</td>
      <td>17</td>
      <td>382652</td>
      <td>29.1250</td>
    </tr>
    <tr>
      <th>4</th>
      <td>3.00</td>
      <td>2</td>
      <td>44</td>
      <td>SC/Paris 2123</td>
      <td>41.5792</td>
    </tr>
  </tbody>
</table>
</div>
<h3 id="Группировка"><a class="header" href="#Группировка">Группировка</a></h3>
<pre><code class="language-python">print("Pclass 1: ", df[df["Pclass"] == 1]["Age"].mean())
print("Pclass 2: ", df[df["Pclass"] == 2]["Age"].mean())
print("Pclass 3: ", df[df["Pclass"] == 3]["Age"].mean())
</code></pre>
<pre><code>Pclass 1:  36.86363636363637
Pclass 2:  26.68576923076923
Pclass 3:  23.26923076923077
</code></pre>
<pre><code class="language-python">df.groupby(["Pclass"])[["Age"]].mean()
</code></pre>
<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }
<pre><code>.dataframe tbody tr th {
    vertical-align: top;
}

.dataframe thead th {
    text-align: right;
}
</code></pre>
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>Age</th>
    </tr>
    <tr>
      <th>Pclass</th>
      <th></th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>1</th>
      <td>36.863636</td>
    </tr>
    <tr>
      <th>2</th>
      <td>26.685769</td>
    </tr>
    <tr>
      <th>3</th>
      <td>23.269231</td>
    </tr>
  </tbody>
</table>
</div>
<pre><code class="language-python">df.groupby(["Survived", "Pclass"])
</code></pre>
<pre><code>&lt;pandas.core.groupby.generic.DataFrameGroupBy object at 0x73b08903f7d0&gt;
</code></pre>
<pre><code class="language-python">df.groupby(["Survived", "Pclass"])["PassengerId"].count()
</code></pre>
<pre><code>Survived  Pclass
0         1         18
          2         16
          3         65
1         1          7
          2         11
          3         26
Name: PassengerId, dtype: int64
</code></pre>
<pre><code class="language-python">df.groupby(["Survived", "Pclass"])[["PassengerId", "Cabin"]].count()
</code></pre>
<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }
<pre><code>.dataframe tbody tr th {
    vertical-align: top;
}

.dataframe thead th {
    text-align: right;
}
</code></pre>
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th></th>
      <th>PassengerId</th>
      <th>Cabin</th>
    </tr>
    <tr>
      <th>Survived</th>
      <th>Pclass</th>
      <th></th>
      <th></th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th rowspan="3" valign="top">0</th>
      <th>1</th>
      <td>18</td>
      <td>12</td>
    </tr>
    <tr>
      <th>2</th>
      <td>16</td>
      <td>1</td>
    </tr>
    <tr>
      <th>3</th>
      <td>65</td>
      <td>1</td>
    </tr>
    <tr>
      <th rowspan="3" valign="top">1</th>
      <th>1</th>
      <td>7</td>
      <td>7</td>
    </tr>
    <tr>
      <th>2</th>
      <td>11</td>
      <td>2</td>
    </tr>
    <tr>
      <th>3</th>
      <td>26</td>
      <td>2</td>
    </tr>
  </tbody>
</table>
</div>
<pre><code class="language-python">df.groupby(["Survived", "Pclass"])[["PassengerId", "Fare"]].describe()
</code></pre>
<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }
<pre><code>.dataframe tbody tr th {
    vertical-align: top;
}

.dataframe thead tr th {
    text-align: left;
}

.dataframe thead tr:last-of-type th {
    text-align: right;
}
</code></pre>
</style>
<table border="1" class="dataframe">
  <thead>
    <tr>
      <th></th>
      <th></th>
      <th colspan="8" halign="left">PassengerId</th>
      <th colspan="8" halign="left">Fare</th>
    </tr>
    <tr>
      <th></th>
      <th></th>
      <th>count</th>
      <th>mean</th>
      <th>std</th>
      <th>min</th>
      <th>25%</th>
      <th>50%</th>
      <th>75%</th>
      <th>max</th>
      <th>count</th>
      <th>mean</th>
      <th>std</th>
      <th>min</th>
      <th>25%</th>
      <th>50%</th>
      <th>75%</th>
      <th>max</th>
    </tr>
    <tr>
      <th>Survived</th>
      <th>Pclass</th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th rowspan="3" valign="top">0</th>
      <th>1</th>
      <td>18.0</td>
      <td>82.555556</td>
      <td>44.501450</td>
      <td>7.0</td>
      <td>40.75</td>
      <td>88.5</td>
      <td>117.00</td>
      <td>156.0</td>
      <td>18.0</td>
      <td>80.035183</td>
      <td>66.109719</td>
      <td>27.7208</td>
      <td>51.896875</td>
      <td>61.2771</td>
      <td>78.721875</td>
      <td>263.0000</td>
    </tr>
    <tr>
      <th>2</th>
      <td>16.0</td>
      <td>107.187500</td>
      <td>44.842270</td>
      <td>21.0</td>
      <td>72.50</td>
      <td>122.0</td>
      <td>145.25</td>
      <td>151.0</td>
      <td>16.0</td>
      <td>33.555725</td>
      <td>32.412477</td>
      <td>10.5000</td>
      <td>12.881250</td>
      <td>23.5000</td>
      <td>31.740600</td>
      <td>130.0000</td>
    </tr>
    <tr>
      <th>3</th>
      <td>65.0</td>
      <td>80.892308</td>
      <td>42.930585</td>
      <td>1.0</td>
      <td>49.00</td>
      <td>87.0</td>
      <td>114.00</td>
      <td>155.0</td>
      <td>65.0</td>
      <td>19.123272</td>
      <td>20.710190</td>
      <td>6.7500</td>
      <td>7.895800</td>
      <td>8.0500</td>
      <td>21.075000</td>
      <td>98.2500</td>
    </tr>
    <tr>
      <th rowspan="3" valign="top">1</th>
      <th>1</th>
      <td>7.0</td>
      <td>84.000000</td>
      <td>49.568135</td>
      <td>24.0</td>
      <td>44.00</td>
      <td>89.0</td>
      <td>117.50</td>
      <td>152.0</td>
      <td>7.0</td>
      <td>90.966057</td>
      <td>85.998766</td>
      <td>26.2833</td>
      <td>35.500000</td>
      <td>63.3583</td>
      <td>106.560400</td>
      <td>263.0000</td>
    </tr>
    <tr>
      <th>2</th>
      <td>11.0</td>
      <td>57.181818</td>
      <td>35.261362</td>
      <td>10.0</td>
      <td>33.00</td>
      <td>57.0</td>
      <td>73.00</td>
      <td>134.0</td>
      <td>11.0</td>
      <td>21.627273</td>
      <td>10.581905</td>
      <td>10.5000</td>
      <td>11.750000</td>
      <td>26.0000</td>
      <td>28.375000</td>
      <td>41.5792</td>
    </tr>
    <tr>
      <th>3</th>
      <td>26.0</td>
      <td>72.807692</td>
      <td>46.318048</td>
      <td>3.0</td>
      <td>34.00</td>
      <td>72.0</td>
      <td>109.50</td>
      <td>147.0</td>
      <td>26.0</td>
      <td>16.698400</td>
      <td>24.254889</td>
      <td>7.1417</td>
      <td>7.756250</td>
      <td>7.9250</td>
      <td>14.244775</td>
      <td>124.7500</td>
    </tr>
  </tbody>
</table>
</div>
<h3 id="Работа-с-timestampами"><a class="header" href="#Работа-с-timestampами">Работа с timestamp'ами</a></h3>
<pre><code class="language-python">tdf = df.copy()
tdf["ts"] = range(1560000000, 1560000000 + tdf.shape[0])
</code></pre>
<pre><code class="language-python">tdf.head(2)
</code></pre>
<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }
<pre><code>.dataframe tbody tr th {
    vertical-align: top;
}

.dataframe thead th {
    text-align: right;
}
</code></pre>
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>PassengerId</th>
      <th>Survived</th>
      <th>Pclass</th>
      <th>Name</th>
      <th>Sex</th>
      <th>Age</th>
      <th>SibSp</th>
      <th>Parch</th>
      <th>Ticket</th>
      <th>Fare</th>
      <th>Cabin</th>
      <th>Embarked</th>
      <th>ts</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>78</th>
      <td>79</td>
      <td>1</td>
      <td>2</td>
      <td>Caldwell, Master. Alden Gates</td>
      <td>male</td>
      <td>0.83</td>
      <td>0</td>
      <td>2</td>
      <td>248738</td>
      <td>29.000</td>
      <td>NaN</td>
      <td>S</td>
      <td>1560000000</td>
    </tr>
    <tr>
      <th>7</th>
      <td>8</td>
      <td>0</td>
      <td>3</td>
      <td>Palsson, Master. Gosta Leonard</td>
      <td>male</td>
      <td>2.00</td>
      <td>3</td>
      <td>1</td>
      <td>349909</td>
      <td>21.075</td>
      <td>NaN</td>
      <td>S</td>
      <td>1560000001</td>
    </tr>
  </tbody>
</table>
</div>
<pre><code class="language-python">tdf["ts"] = pd.to_datetime(tdf["ts"], unit="s")
</code></pre>
<pre><code class="language-python">tdf.head(2)
</code></pre>
<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }
<pre><code>.dataframe tbody tr th {
    vertical-align: top;
}

.dataframe thead th {
    text-align: right;
}
</code></pre>
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>PassengerId</th>
      <th>Survived</th>
      <th>Pclass</th>
      <th>Name</th>
      <th>Sex</th>
      <th>Age</th>
      <th>SibSp</th>
      <th>Parch</th>
      <th>Ticket</th>
      <th>Fare</th>
      <th>Cabin</th>
      <th>Embarked</th>
      <th>ts</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>78</th>
      <td>79</td>
      <td>1</td>
      <td>2</td>
      <td>Caldwell, Master. Alden Gates</td>
      <td>male</td>
      <td>0.83</td>
      <td>0</td>
      <td>2</td>
      <td>248738</td>
      <td>29.000</td>
      <td>NaN</td>
      <td>S</td>
      <td>2019-06-08 13:20:00</td>
    </tr>
    <tr>
      <th>7</th>
      <td>8</td>
      <td>0</td>
      <td>3</td>
      <td>Palsson, Master. Gosta Leonard</td>
      <td>male</td>
      <td>2.00</td>
      <td>3</td>
      <td>1</td>
      <td>349909</td>
      <td>21.075</td>
      <td>NaN</td>
      <td>S</td>
      <td>2019-06-08 13:20:01</td>
    </tr>
  </tbody>
</table>
</div>
<pre><code class="language-python">tdf.set_index("ts", inplace=True)
</code></pre>
<pre><code class="language-python">tdf.resample("15s").sum()[["PassengerId", "Survived", "Pclass", "Sex"]]
</code></pre>
<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }
<pre><code>.dataframe tbody tr th {
    vertical-align: top;
}

.dataframe thead th {
    text-align: right;
}
</code></pre>
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>PassengerId</th>
      <th>Survived</th>
      <th>Pclass</th>
      <th>Sex</th>
    </tr>
    <tr>
      <th>ts</th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>2019-06-08 13:20:00</th>
      <td>862</td>
      <td>7</td>
      <td>41</td>
      <td>malemalefemalemalefemalemalefemalefemalemalefe...</td>
    </tr>
    <tr>
      <th>2019-06-08 13:20:15</th>
      <td>1302</td>
      <td>4</td>
      <td>40</td>
      <td>femalefemalefemalefemalemalemalefemalefemalefe...</td>
    </tr>
    <tr>
      <th>2019-06-08 13:20:30</th>
      <td>1235</td>
      <td>3</td>
      <td>38</td>
      <td>malemalefemalefemalemalemalemalemalemalemalema...</td>
    </tr>
    <tr>
      <th>2019-06-08 13:20:45</th>
      <td>1628</td>
      <td>6</td>
      <td>33</td>
      <td>femalefemalemalemalemalemalemalemalefemalemale...</td>
    </tr>
    <tr>
      <th>2019-06-08 13:21:00</th>
      <td>1057</td>
      <td>5</td>
      <td>37</td>
      <td>malemalemalemalefemalefemalemalefemalemalemale...</td>
    </tr>
    <tr>
      <th>2019-06-08 13:21:15</th>
      <td>1144</td>
      <td>6</td>
      <td>37</td>
      <td>malemalefemalefemalemalefemalemalemalemalemale...</td>
    </tr>
    <tr>
      <th>2019-06-08 13:21:30</th>
      <td>1590</td>
      <td>0</td>
      <td>28</td>
      <td>malemalemalemalemalemalemalemalemalemalemalema...</td>
    </tr>
    <tr>
      <th>2019-06-08 13:21:45</th>
      <td>845</td>
      <td>4</td>
      <td>33</td>
      <td>malemalemalemalemalemalemalemalemalemalefemale...</td>
    </tr>
    <tr>
      <th>2019-06-08 13:22:00</th>
      <td>912</td>
      <td>6</td>
      <td>41</td>
      <td>femalemalemalemalemalefemalemalemalemalemalema...</td>
    </tr>
    <tr>
      <th>2019-06-08 13:22:15</th>
      <td>994</td>
      <td>3</td>
      <td>24</td>
      <td>malemalefemalemalemalefemalefemalemale</td>
    </tr>
  </tbody>
</table>
</div>
<h3 id="rolling-функции"><a class="header" href="#rolling-функции">Rolling функции</a></h3>
<p><img src="https://i2.wp.com/datascienceparichay.com/wp-content/uploads/2021/11/rolling-sum-pandas.png?fit=900%2C520&amp;ssl=1" alt="Imgurl" /></p>
<pre><code class="language-python">tdf.sort_index(inplace=True)
</code></pre>
<pre><code class="language-python">tdf[["Fare"]].rolling(window=5).mean().head(10)
</code></pre>
<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }
<pre><code>.dataframe tbody tr th {
    vertical-align: top;
}

.dataframe thead th {
    text-align: right;
}
</code></pre>
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>Fare</th>
    </tr>
    <tr>
      <th>ts</th>
      <th></th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>2019-06-08 13:20:00</th>
      <td>NaN</td>
    </tr>
    <tr>
      <th>2019-06-08 13:20:01</th>
      <td>NaN</td>
    </tr>
    <tr>
      <th>2019-06-08 13:20:02</th>
      <td>NaN</td>
    </tr>
    <tr>
      <th>2019-06-08 13:20:03</th>
      <td>NaN</td>
    </tr>
    <tr>
      <th>2019-06-08 13:20:04</th>
      <td>30.41084</td>
    </tr>
    <tr>
      <th>2019-06-08 13:20:05</th>
      <td>30.19084</td>
    </tr>
    <tr>
      <th>2019-06-08 13:20:06</th>
      <td>29.31584</td>
    </tr>
    <tr>
      <th>2019-06-08 13:20:07</th>
      <td>28.61084</td>
    </tr>
    <tr>
      <th>2019-06-08 13:20:08</th>
      <td>30.72334</td>
    </tr>
    <tr>
      <th>2019-06-08 13:20:09</th>
      <td>26.62250</td>
    </tr>
  </tbody>
</table>
</div>
<p>Можно делать вместе с groupby</p>
<pre><code class="language-python">rol = tdf[["Sex", "Fare"]].groupby(["Sex"]).rolling(window=5).mean()
</code></pre>
<pre><code class="language-python">rol.head(100)
</code></pre>
<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }
<pre><code>.dataframe tbody tr th {
    vertical-align: top;
}

.dataframe thead th {
    text-align: right;
}
</code></pre>
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th></th>
      <th>Fare</th>
    </tr>
    <tr>
      <th>Sex</th>
      <th>ts</th>
      <th></th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th rowspan="5" valign="top">female</th>
      <th>2019-06-08 13:20:02</th>
      <td>NaN</td>
    </tr>
    <tr>
      <th>2019-06-08 13:20:04</th>
      <td>NaN</td>
    </tr>
    <tr>
      <th>2019-06-08 13:20:06</th>
      <td>NaN</td>
    </tr>
    <tr>
      <th>2019-06-08 13:20:07</th>
      <td>NaN</td>
    </tr>
    <tr>
      <th>2019-06-08 13:20:09</th>
      <td>27.67584</td>
    </tr>
    <tr>
      <th>...</th>
      <th>...</th>
      <td>...</td>
    </tr>
    <tr>
      <th rowspan="5" valign="top">male</th>
      <th>2019-06-08 13:21:26</th>
      <td>14.02416</td>
    </tr>
    <tr>
      <th>2019-06-08 13:21:27</th>
      <td>17.12416</td>
    </tr>
    <tr>
      <th>2019-06-08 13:21:28</th>
      <td>12.72000</td>
    </tr>
    <tr>
      <th>2019-06-08 13:21:29</th>
      <td>16.34084</td>
    </tr>
    <tr>
      <th>2019-06-08 13:21:30</th>
      <td>19.81000</td>
    </tr>
  </tbody>
</table>
<p>100 rows × 1 columns</p>
</div>
<pre><code class="language-python">rol.loc['male'].head(10)
</code></pre>
<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }
<pre><code>.dataframe tbody tr th {
    vertical-align: top;
}

.dataframe thead th {
    text-align: right;
}
</code></pre>
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>Fare</th>
    </tr>
    <tr>
      <th>ts</th>
      <th></th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>2019-06-08 13:20:00</th>
      <td>NaN</td>
    </tr>
    <tr>
      <th>2019-06-08 13:20:01</th>
      <td>NaN</td>
    </tr>
    <tr>
      <th>2019-06-08 13:20:03</th>
      <td>NaN</td>
    </tr>
    <tr>
      <th>2019-06-08 13:20:05</th>
      <td>NaN</td>
    </tr>
    <tr>
      <th>2019-06-08 13:20:08</th>
      <td>29.35750</td>
    </tr>
    <tr>
      <th>2019-06-08 13:20:11</th>
      <td>32.93750</td>
    </tr>
    <tr>
      <th>2019-06-08 13:20:12</th>
      <td>30.97084</td>
    </tr>
    <tr>
      <th>2019-06-08 13:20:19</th>
      <td>26.98918</td>
    </tr>
    <tr>
      <th>2019-06-08 13:20:20</th>
      <td>28.28418</td>
    </tr>
    <tr>
      <th>2019-06-08 13:20:26</th>
      <td>22.64668</td>
    </tr>
  </tbody>
</table>
</div>
<h3 id="Работа-со-строками"><a class="header" href="#Работа-со-строками">Работа со строками</a></h3>
<pre><code class="language-python">df["Name"].str.lower()\
          .str.replace(",", " ")\
          .str.split(".").str[1]\
          .head(10)
</code></pre>
<pre><code>78                    alden gates
7                   gosta leonard
119              ellis anna maria
16                         eugene
43      simonne marie anne andree
63                         harald
10                 marguerite rut
58               constance mirium
50                     juha niilo
24                 torborg danira
Name: Name, dtype: object
</code></pre>
<h3 id="Работа-с-nanами"><a class="header" href="#Работа-с-nanами">Работа с NaN'ами</a></h3>
<pre><code class="language-python">df["Cabin"].head(15)
</code></pre>
<pre><code>78     NaN
7      NaN
119    NaN
16     NaN
43     NaN
63     NaN
10      G6
58     NaN
50     NaN
24     NaN
147    NaN
59     NaN
125    NaN
39     NaN
9      NaN
Name: Cabin, dtype: object
</code></pre>
<pre><code class="language-python">df["Cabin"].dropna().head(15)
</code></pre>
<pre><code>10              G6
136            D47
27     C23 C25 C27
102            D26
151             C2
97         D10 D12
88     C23 C25 C27
118        B58 B60
139            B86
75           F G73
23              A6
66             F33
21             D56
148             F2
137           C123
Name: Cabin, dtype: object
</code></pre>
<pre><code class="language-python">df["Cabin"].fillna(3).head(5)
</code></pre>
<pre><code>78     3
7      3
119    3
16     3
43     3
Name: Cabin, dtype: object
</code></pre>
<pre><code class="language-python">df["Cabin"].fillna(method="bfill").head(15)
</code></pre>
<pre><code>/tmp/ipykernel_984447/671977776.py:1: FutureWarning: Series.fillna with 'method' is deprecated and will raise in a future version. Use obj.ffill() or obj.bfill() instead.
  df["Cabin"].fillna(method="bfill").head(15)





78      G6
7       G6
119     G6
16      G6
43      G6
63      G6
10      G6
58     D47
50     D47
24     D47
147    D47
59     D47
125    D47
39     D47
9      D47
Name: Cabin, dtype: object
</code></pre>
<pre><code class="language-python">pd.isna(df["Cabin"]).head(10)
</code></pre>
<pre><code>78      True
7       True
119     True
16      True
43      True
63      True
10     False
58      True
50      True
24      True
Name: Cabin, dtype: bool
</code></pre>
<h3 id="Функция-apply"><a class="header" href="#Функция-apply">Функция apply</a></h3>
<pre><code class="language-python">def dummpy_example(row):
    return row['Sex'] * row['Pclass']

df['dummy_example'] = df.apply(dummpy_example, axis=1)
df.tail(3)
</code></pre>
<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }
<pre><code>.dataframe tbody tr th {
    vertical-align: top;
}

.dataframe thead th {
    text-align: right;
}
</code></pre>
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>PassengerId</th>
      <th>Survived</th>
      <th>Pclass</th>
      <th>Name</th>
      <th>Sex</th>
      <th>Age</th>
      <th>SibSp</th>
      <th>Parch</th>
      <th>Ticket</th>
      <th>Fare</th>
      <th>Cabin</th>
      <th>Embarked</th>
      <th>dummy_example</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>128</th>
      <td>129</td>
      <td>1</td>
      <td>3</td>
      <td>Peter, Miss. Anna</td>
      <td>female</td>
      <td>NaN</td>
      <td>1</td>
      <td>1</td>
      <td>2668</td>
      <td>22.3583</td>
      <td>F E69</td>
      <td>C</td>
      <td>femalefemalefemale</td>
    </tr>
    <tr>
      <th>140</th>
      <td>141</td>
      <td>0</td>
      <td>3</td>
      <td>Boulos, Mrs. Joseph (Sultana)</td>
      <td>female</td>
      <td>NaN</td>
      <td>0</td>
      <td>2</td>
      <td>2678</td>
      <td>15.2458</td>
      <td>NaN</td>
      <td>C</td>
      <td>femalefemalefemale</td>
    </tr>
    <tr>
      <th>154</th>
      <td>155</td>
      <td>0</td>
      <td>3</td>
      <td>Olsen, Mr. Ole Martin</td>
      <td>male</td>
      <td>NaN</td>
      <td>0</td>
      <td>0</td>
      <td>Fa 265302</td>
      <td>7.3125</td>
      <td>NaN</td>
      <td>S</td>
      <td>malemalemale</td>
    </tr>
  </tbody>
</table>
</div>
<h3 id="Визуализация"><a class="header" href="#Визуализация">Визуализация</a></h3>
<pre><code class="language-python">tdf["Fare"].plot()
</code></pre>
<pre><code>&lt;Axes: xlabel='ts'&gt;
</code></pre>
<p><img src="output_189_1.png" alt="png" /></p>
<pre><code class="language-python">tdf["Fare"].resample("10s").mean().plot()
</code></pre>
<pre><code>&lt;Axes: xlabel='ts'&gt;
</code></pre>
<p><img src="output_190_1.png" alt="png" /></p>
<pre><code class="language-python">tdf["Sex"].hist()
</code></pre>
<pre><code>&lt;Axes: &gt;
</code></pre>
<p><img src="output_191_1.png" alt="png" /></p>
<pre><code class="language-python">
</code></pre>

                    </main>

                    <nav class="nav-wrapper" aria-label="Page navigation">
                        <!-- Mobile navigation buttons -->
                            <a rel="prev" href="../../dev/python/optimization.html" class="mobile-nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                                <i class="fa fa-angle-left"></i>
                            </a>

                            <a rel="next prefetch" href="../../dev/python/visualization/practice.html" class="mobile-nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                                <i class="fa fa-angle-right"></i>
                            </a>

                        <div style="clear: both"></div>
                    </nav>
                </div>
            </div>

            <nav class="nav-wide-wrapper" aria-label="Page navigation">
                    <a rel="prev" href="../../dev/python/optimization.html" class="nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                        <i class="fa fa-angle-left"></i>
                    </a>

                    <a rel="next prefetch" href="../../dev/python/visualization/practice.html" class="nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                        <i class="fa fa-angle-right"></i>
                    </a>
            </nav>

        </div>




        <script>
            window.playground_copyable = true;
        </script>


        <script src="../../elasticlunr.min.js"></script>
        <script src="../../mark.min.js"></script>
        <script src="../../searcher.js"></script>

        <script src="../../clipboard.min.js"></script>
        <script src="../../highlight.js"></script>
        <script src="../../book.js"></script>

        <!-- Custom JS scripts -->


    </div>
    </body>
</html>
