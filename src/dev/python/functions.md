# –§—É–Ω–∫—Ü–∏–∏ –≤ Python

## –°–∏–Ω—Ç–∞–∫—Å–∏—Å –æ–±—ä—è–≤–ª–µ–Ω–∏—è —Ñ—É–Ω–∫—Ü–∏–π

### –ë–∞–∑–æ–≤—ã–π —Å–∏–Ω—Ç–∞–∫—Å–∏—Å

–ò–º—è —Ñ—É–Ω–∫—Ü–∏–∏ –≤ Python –º–æ–∂–µ—Ç —Å–æ–¥–µ—Ä–∂–∞—Ç—å –±—É–∫–≤—ã, —Ü–∏—Ñ—Ä—ã –∏ —Å–∏–º–≤–æ–ª –ø–æ–¥—á–µ—Ä–∫–∏–≤–∞–Ω–∏—è `_`, –Ω–æ –Ω–µ –º–æ–∂–µ—Ç –Ω–∞—á–∏–Ω–∞—Ç—å—Å—è —Å —Ü–∏—Ñ—Ä—ã:

```python
def foo():
    return 42

foo()  # –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç 42
```

**–í–∞–∂–Ω–æ:** –æ–ø–µ—Ä–∞—Ç–æ—Ä `return` –Ω–µ –æ–±—è–∑–∞—Ç–µ–ª–µ–Ω. –ï—Å–ª–∏ –µ–≥–æ –Ω–µ—Ç, —Ñ—É–Ω–∫—Ü–∏—è –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç `None`:

```python
def foo():
    42

print(foo())  # –≤—ã–≤–æ–¥–∏—Ç None
```

### –î–æ–∫—É–º–µ–Ω—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ —Ñ—É–Ω–∫—Ü–∏–π

–î–ª—è –¥–æ–∫—É–º–µ–Ω—Ç–∏—Ä–æ–≤–∞–Ω–∏—è –∏—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è —Å—Ç—Ä–æ–∫–æ–≤—ã–µ –ª–∏—Ç–µ—Ä–∞–ª—ã (docstring):

```python
def foo():
    """I return 42."""
    return 42
```

–î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –¥–æ—Å—Ç—É–ø–Ω–∞ —á–µ—Ä–µ–∑ –∞—Ç—Ä–∏–±—É—Ç `__doc__` –∏–ª–∏ —Ñ—É–Ω–∫—Ü–∏—é `help()`:

```python
print(foo.__doc__)  # 'I return 42.'
help(foo)           # –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—é
```

## –†–∞–±–æ—Ç–∞ —Å –∞—Ä–≥—É–º–µ–Ω—Ç–∞–º–∏

### –ü–æ–∑–∏—Ü–∏–æ–Ω–Ω—ã–µ –∏ –∏–º–µ–Ω–æ–≤–∞–Ω–Ω—ã–µ –∞—Ä–≥—É–º–µ–Ω—Ç—ã

```python
def min(x, y):
    return x if x < y else y

min(-5, 12)        # -5
min(x=-5, y=12)    # -5
min(y=12, x=-5)    # -5 (–ø–æ—Ä—è–¥–æ–∫ –Ω–µ –≤–∞–∂–µ–Ω)
```

### –£–ø–∞–∫–æ–≤–∫–∞ –ø–æ–∑–∏—Ü–∏–æ–Ω–Ω—ã—Ö –∞—Ä–≥—É–º–µ–Ω—Ç–æ–≤

–î–ª—è —Ä–∞–±–æ—Ç—ã —Å –ø—Ä–æ–∏–∑–≤–æ–ª—å–Ω—ã–º –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ–º –∞—Ä–≥—É–º–µ–Ω—Ç–æ–≤ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è `*args`:

```python
def min(*args):
    res = float("inf")
    for arg in args:
        if arg < res:
            res = arg
    return res

min(-5, 12, 13)  # -5
min()            # inf
```

**–û–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–π –ø–µ—Ä–≤—ã–π –∞—Ä–≥—É–º–µ–Ω—Ç:**

```python
def min(first, *args):
    res = first
    for arg in args:
        if arg < res:
            res = arg
    return res

min()  # TypeError: missing required argument 'first'
```

### –†–∞—Å–ø–∞–∫–æ–≤–∫–∞ –∞—Ä–≥—É–º–µ–Ω—Ç–æ–≤

–°–∏–Ω—Ç–∞–∫—Å–∏—Å —Ä–∞—Å–ø–∞–∫–æ–≤–∫–∏ —Ä–∞–±–æ—Ç–∞–µ—Ç —Å –ª—é–±—ã–º–∏ –∏—Ç–µ—Ä–∏—Ä—É–µ–º—ã–º–∏ –æ–±—ä–µ–∫—Ç–∞–º–∏:

```python
xs = {-5, 12, 13}
min(*xs)           # -5
min(*[-5, 12, 13]) # -5
min(*(-5, 12, 13)) # -5
```

### –ö–ª—é—á–µ–≤—ã–µ –∞—Ä–≥—É–º–µ–Ω—Ç—ã –∏ –∑–Ω–∞—á–µ–Ω–∏—è –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é

```python
def bounded_min(first, *args, lo=float("-inf"), hi=float("inf")):
    res = hi
    for arg in (first,) + args:
        if arg < res and lo < arg < hi:
            res = arg
    return max(res, lo)

bounded_min(-5, 12, 13, lo=0, hi=255)  # 12
```

### –û–ø–∞—Å–Ω–æ—Å—Ç—å –∏–∑–º–µ–Ω—è–µ–º—ã—Ö –∑–Ω–∞—á–µ–Ω–∏–π –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é

**–ù–µ–ø—Ä–∞–≤–∏–ª—å–Ω–æ:**

```python
def unique(iterable, seen=set()):
    acc = []
    for item in iterable:
        if item not in seen:
            seen.add(item)
            acc.append(item)
    return acc

xs = [1, 1, 2, 3]
unique(xs)  # [1, 2, 3]
unique(xs)  # [] üò±
```

**–ü—Ä–∞–≤–∏–ª—å–Ω–æ:**

```python
def unique(iterable, seen=None):
    seen = set(seen or [])  # None - falsy –∑–Ω–∞—á–µ–Ω–∏–µ
    acc = []
    for item in iterable:
        if item not in seen:
            seen.add(item)
            acc.append(item)
    return acc

xs = [1, 1, 2, 3]
unique(xs)  # [1, 2, 3]
unique(xs)  # [1, 2, 3] ‚úÖ
```

### –¢–æ–ª—å–∫–æ –∫–ª—é—á–µ–≤—ã–µ –∞—Ä–≥—É–º–µ–Ω—Ç—ã

–ú–æ–∂–Ω–æ —Ç—Ä–µ–±–æ–≤–∞—Ç—å, —á—Ç–æ–±—ã –Ω–µ–∫–æ—Ç–æ—Ä—ã–µ –∞—Ä–≥—É–º–µ–Ω—Ç—ã –ø–µ—Ä–µ–¥–∞–≤–∞–ª–∏—Å—å —Ç–æ–ª—å–∫–æ –ø–æ –∏–º–µ–Ω–∏:

```python
def flatten(xs, *, depth=None):
    pass

flatten([1, [2], 3], depth=1)  # ‚úÖ
flatten([1, [2], 3], 1)        # TypeError
```

### –£–ø–∞–∫–æ–≤–∫–∞ –∫–ª—é—á–µ–≤—ã—Ö –∞—Ä–≥—É–º–µ–Ω—Ç–æ–≤

```python
def runner(cmd, **kwargs):
    if kwargs.get("verbose", True):
        print("Logging enabled")

runner("mysqld", limit=42)                    # ‚úÖ
runner("mysqld", **{"verbose": False})        # ‚úÖ
options = {"verbose": False}
runner("mysqld", **options)                   # ‚úÖ
```

## –†–∞—Å–ø–∞–∫–æ–≤–∫–∞ –∏ –ø—Ä–∏—Å–≤–∞–∏–≤–∞–Ω–∏–µ

### –ë–∞–∑–æ–≤–∞—è —Ä–∞—Å–ø–∞–∫–æ–≤–∫–∞

```python
x, y, z = [1, 2, 3]           # ‚úÖ
x, y, z = {1, 2, 3}           # ‚úÖ (–Ω–æ –ø–æ—Ä—è–¥–æ–∫ –Ω–µ –≥–∞—Ä–∞–Ω—Ç–∏—Ä–æ–≤–∞–Ω!)
x, y, z = "xyz"               # ‚úÖ

# –†–∞—Å–ø–∞–∫–æ–≤–∫–∞ –≤–ª–æ–∂–µ–Ω–Ω—ã—Ö —Å—Ç—Ä—É–∫—Ç—É—Ä
rectangle = (0, 0), (4, 4)
(x1, y1), (x2, y2) = rectangle
```

### –†–∞—Å—à–∏—Ä–µ–Ω–Ω–∞—è —Ä–∞—Å–ø–∞–∫–æ–≤–∫–∞ (Python 3.0+)

```python
first, *rest = range(1, 5)           # first=1, rest=[2, 3, 4]
first, *rest, last = range(1, 5)     # first=1, rest=[2, 3], last=4

# –ú–æ–∂–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –≤ –ª—é–±–æ–º –º–µ—Å—Ç–µ
*_, (first, *rest) = [range(1, 5)] * 5
```

**–û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç—å:** –ø—Ä–∏ –Ω–µ–¥–æ—Å—Ç–∞—Ç–∫–µ –∑–Ω–∞—á–µ–Ω–∏–π –≤–æ–∑–Ω–∏–∫–∞–µ—Ç –æ—à–∏–±–∫–∞:

```python
first, *rest, last = [42]  # ValueError
```

### –†–∞—Å–ø–∞–∫–æ–≤–∫–∞ –≤ —Ü–∏–∫–ª–µ for

```python
for a, *b in [range(4), range(2)]:
    print(b)
# –í—ã–≤–æ–¥:
# [1, 2, 3]
# [1]
```

## –û–±–ª–∞—Å—Ç–∏ –≤–∏–¥–∏–º–æ—Å—Ç–∏ (Scopes)

### –§—É–Ω–∫—Ü–∏–∏ –≤–Ω—É—Ç—Ä–∏ —Ñ—É–Ω–∫—Ü–∏–π

–§—É–Ω–∫—Ü–∏–∏ –≤ Python ‚Äî –æ–±—ä–µ–∫—Ç—ã –ø–µ—Ä–≤–æ–≥–æ –∫–ª–∞—Å—Å–∞:

```python
def wrapper():
    def identity(x):
        return x
    return identity

f = wrapper()
f(42)  # 42
```

### –ü—Ä–∞–≤–∏–ª–æ LEGB

–ü–æ–∏—Å–∫ –∏–º–µ–Ω –æ—Å—É—â–µ—Å—Ç–≤–ª—è–µ—Ç—Å—è –≤ —á–µ—Ç—ã—Ä–µ—Ö –æ–±–ª–∞—Å—Ç—è—Ö –≤–∏–¥–∏–º–æ—Å—Ç–∏:

- **L**ocal (–ª–æ–∫–∞–ª—å–Ω–∞—è)
- **E**nclosing (–æ–±—ä–µ–º–ª—é—â–∞—è)
- **G**lobal (–≥–ª–æ–±–∞–ª—å–Ω–∞—è) 
- **B**uilt-in (–≤—Å—Ç—Ä–æ–µ–Ω–Ω–∞—è)

```python
min = 42  # global

def f(*args):
    min = 2  # enclosing
    def g():
        min = 4  # local
        print(min)
```

### –ó–∞–º—ã–∫–∞–Ω–∏—è –∏ –ø–æ–∑–¥–Ω–µ–µ —Å–≤—è–∑—ã–≤–∞–Ω–∏–µ

–ó–∞–º—ã–∫–∞–Ω–∏—è –∏—Å–ø–æ–ª—å–∑—É—é—Ç –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –∏–∑ –≤–Ω–µ—à–Ω–∏—Ö –æ–±–ª–∞—Å—Ç–µ–π –≤–∏–¥–∏–º–æ—Å—Ç–∏ –≤–æ –≤—Ä–µ–º—è –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è:

```python
def f():
    print(i)

for i in range(4):
    f()
# –í—ã–≤–æ–¥:
# 0
# 1
# 2
# 3
```

### –ü—Ä–∏—Å–≤–∞–∏–≤–∞–Ω–∏–µ –∏ –æ–±–ª–∞—Å—Ç–∏ –≤–∏–¥–∏–º–æ—Å—Ç–∏

–ü–æ —É–º–æ–ª—á–∞–Ω–∏—é –ø—Ä–∏—Å–≤–∞–∏–≤–∞–Ω–∏–µ —Å–æ–∑–¥–∞–µ—Ç –ª–æ–∫–∞–ª—å–Ω—É—é –ø–µ—Ä–µ–º–µ–Ω–Ω—É—é:

```python
min = 42

def f():
    min += 1  # UnboundLocalError!
    return min
```

### –û–ø–µ—Ä–∞—Ç–æ—Ä global

–ü–æ–∑–≤–æ–ª—è–µ—Ç –∏–∑–º–µ–Ω—è—Ç—å –≥–ª–æ–±–∞–ª—å–Ω—ã–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ:

```python
min = 42

def f():
    global min
    min += 1
    return min

f()  # 43
f()  # 44
```

### –û–ø–µ—Ä–∞—Ç–æ—Ä nonlocal (Python 3+)

–ü–æ–∑–≤–æ–ª—è–µ—Ç –∏–∑–º–µ–Ω—è—Ç—å –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –∏–∑ –æ–±—ä–µ–º–ª—é—â–µ–π –æ–±–ª–∞—Å—Ç–∏ –≤–∏–¥–∏–º–æ—Å—Ç–∏:

```python
def cell(value=None):
    def get():
        return value
    def set(update):
        nonlocal value
        value = update
    return get, set

get, set = cell()
set(42)
get()  # 42
```

## –§—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ–µ –ø—Ä–æ–≥—Ä–∞–º–º–∏—Ä–æ–≤–∞–Ω–∏–µ

### –ê–Ω–æ–Ω–∏–º–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏ (lambda)

```python
lambda arguments: expression

# –≠–∫–≤–∏–≤–∞–ª–µ–Ω—Ç–Ω–æ:
def <lambda>(arguments):
    return expression
```

–ü—Ä–∏–º–µ—Ä—ã:

```python
lambda x: x ** 2
lambda foo, *args, bar=None, **kwargs: 42
```

### –§—É–Ω–∫—Ü–∏–∏ map, filter, zip

**map** - –ø—Ä–∏–º–µ–Ω—è–µ—Ç —Ñ—É–Ω–∫—Ü–∏—é –∫ –∫–∞–∂–¥–æ–º—É —ç–ª–µ–º–µ–Ω—Ç—É:

```python
list(map(lambda x: x % 7, [1, 9, 16, -1, 2, 5]))  # [1, 2, 2, 6, 2, 5]
```

**filter** - –æ—Å—Ç–∞–≤–ª—è–µ—Ç —ç–ª–µ–º–µ–Ω—Ç—ã, —É–¥–æ–≤–ª–µ—Ç–≤–æ—Ä—è—é—â–∏–µ —É—Å–ª–æ–≤–∏—é:

```python
list(filter(lambda x: x % 2 != 0, range(10)))  # [1, 3, 5, 7, 9]

# –° None - –æ—Å—Ç–∞–≤–ª—è–µ—Ç —Ç–æ–ª—å–∫–æ truthy –∑–Ω–∞—á–µ–Ω–∏—è
xs = [0, None, [], {}, set(), "", 42]
list(filter(None, xs))  # [42]
```

**zip** - –æ–±—ä–µ–¥–∏–Ω—è–µ—Ç —ç–ª–µ–º–µ–Ω—Ç—ã –Ω–µ—Å–∫–æ–ª—å–∫–∏—Ö –ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ—Å—Ç–µ–π:

```python
list(zip("abc", range(3), [42j, 42j, 42j]))
# [('a', 0, 42j), ('b', 1, 42j), ('c', 2, 42j)]
```

### –ì–µ–Ω–µ—Ä–∞—Ç–æ—Ä—ã –∫–æ–ª–ª–µ–∫—Ü–∏–π

**–ì–µ–Ω–µ—Ä–∞—Ç–æ—Ä—ã —Å–ø–∏—Å–∫–æ–≤:**

```python
[x ** 2 for x in range(10) if x % 2 == 1]  # [1, 9, 25, 49, 81]

# –≠–∫–≤–∏–≤–∞–ª–µ–Ω—Ç —Å map/filter:
list(map(lambda x: x ** 2, filter(lambda x: x % 2 == 1, range(10))))

# –í–ª–æ–∂–µ–Ω–Ω—ã–µ –≥–µ–Ω–µ—Ä–∞—Ç–æ—Ä—ã:
nested = [range(5), range(8, 10)]
[x for xs in nested for x in xs]  # [0, 1, 2, 3, 4, 8, 9]
```

**–ì–µ–Ω–µ—Ä–∞—Ç–æ—Ä—ã –º–Ω–æ–∂–µ—Å—Ç–≤ –∏ —Å–ª–æ–≤–∞—Ä–µ–π:**

```python
{x % 7 for x in [1, 9, 16, -1, 2, 5]}  # {1, 2, 5, 6}

date = {'year': 2014, "month": "September", "day": ""}
{k: v for k, v in date.items() if v}  # {'year': 2014, 'month': 'September'}

{x: x ** 2 for x in range(4)}  # {0: 0, 1: 1, 2: 4, 3: 9}
```

## PEP 8: —Å—Ç–∏–ª—å –∫–æ–¥–∞

### –ë–∞–∑–æ–≤—ã–µ —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏

- 4 –ø—Ä–æ–±–µ–ª–∞ –¥–ª—è –æ—Ç—Å—Ç—É–ø–æ–≤
- –ú–∞–∫—Å–∏–º—É–º 79 —Å–∏–º–≤–æ–ª–æ–≤ –≤ —Å—Ç—Ä–æ–∫–µ –∫–æ–¥–∞
- `lower_case_with_underscores` –¥–ª—è –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö –∏ —Ñ—É–Ω–∫—Ü–∏–π
- `UPPER_CASE_WITH_UNDERSCORES` –¥–ª—è –∫–æ–Ω—Å—Ç–∞–Ω—Ç

### –í—ã—Ä–∞–∂–µ–Ω–∏—è –∏ –æ–ø–µ—Ä–∞—Ç–æ—Ä—ã

**–ü—Ä–∞–≤–∏–ª—å–Ω–æ:**
```python
exp = -1.05
value = (item_value / item_count) * offset / exp

if bar:
    x += 1

if method == 'md5':
    pass

if key not in d:
    pass
```

**–ù–µ–ø—Ä–∞–≤–∏–ª—å–Ω–æ:**
```python
if bar: x += 1

if 'md5' == method:
    pass

if not key in d:
    pass
```

### –§—É–Ω–∫—Ü–∏–∏

```python
def something_useful(arg, **options):
    """One-line summary.

    Optional longer description.
    """
    pass
```

## –†–µ–∑—é–º–µ

- –§—É–Ω–∫—Ü–∏–∏ –º–æ–≥—É—Ç –ø—Ä–∏–Ω–∏–º–∞—Ç—å –ø—Ä–æ–∏–∑–≤–æ–ª—å–Ω–æ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –ø–æ–∑–∏—Ü–∏–æ–Ω–Ω—ã—Ö (`*args`) –∏ –∫–ª—é—á–µ–≤—ã—Ö (`**kwargs`) –∞—Ä–≥—É–º–µ–Ω—Ç–æ–≤
- –°–∏–Ω—Ç–∞–∫—Å–∏—Å —Ä–∞—Å–ø–∞–∫–æ–≤–∫–∏ —Ä–∞–±–æ—Ç–∞–µ—Ç –≤ –≤—ã–∑–æ–≤–∞—Ö —Ñ—É–Ω–∫—Ü–∏–π, –ø—Ä–∏—Å–≤–∞–∏–≤–∞–Ω–∏–∏ –∏ —Ü–∏–∫–ª–∞—Ö
- –ü–æ–∏—Å–∫ –∏–º–µ–Ω –æ—Å—É—â–µ—Å—Ç–≤–ª—è–µ—Ç—Å—è –ø–æ –ø—Ä–∞–≤–∏–ª—É LEGB
- –ü—Ä–∏—Å–≤–∞–∏–≤–∞–Ω–∏–µ —Å–æ–∑–¥–∞–µ—Ç –ª–æ–∫–∞–ª—å–Ω—ã–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ (–º–æ–∂–Ω–æ –∏–∑–º–µ–Ω–∏—Ç—å —á–µ—Ä–µ–∑ `global`/`nonlocal`)
- Python –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç —ç–ª–µ–º–µ–Ω—Ç—ã –§–ü: lambda, map, filter, zip, –≥–µ–Ω–µ—Ä–∞—Ç–æ—Ä—ã –∫–æ–ª–ª–µ–∫—Ü–∏–π
- PEP 8 —Å–æ–¥–µ—Ä–∂–∏—Ç —Å—Ç–∏–ª–∏—Å—Ç–∏—á–µ—Å–∫–∏–µ —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏ –¥–ª—è –Ω–∞–ø–∏—Å–∞–Ω–∏—è —á–∏—Ç–∞–µ–º–æ–≥–æ –∫–æ–¥–∞