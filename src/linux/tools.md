## Инструменты Linux

### 1. Инструменты для работы в терминале

#### Слепая печать

Первым шагом к эффективной работе в терминале является освоение слепой десятипальцевой печати.
*   **Преимущества:** увеличение скорости, меньше ошибок.
*   **Сложность:** первые месяцы будут тяжелыми, но результат того стоит.

**Тренажеры:**
*   **GNU Typist:** консольный тренажер. Установка: `apt-get install gtypist` или `brew install gtypist`.
*   **Monkeytype:** современный онлайн-тренажер для программистов.
*   **Keybr.com:** еще один популярный онлайн-тренажер.

#### Эмуляторы терминала

Стандартные терминалы часто ограничены в функциональности. Хороший эмулятор должен поддерживать:
*   Табы
*   Разделение окон (split)
*   Копирование при выделении
*   Поддержку кликабельных ссылок
*   Плагины и кастомизацию

**Рекомендации:**
*   **macOS:** iTerm2
*   **Linux:** Terminator, Kitty, Konsole
*   **Windows 10/11:** Windows Terminal
*   **Windows (условно-бесплатный):** MobaXterm (также включает SSH-клиент, X-сервер и сетевые инструменты)

#### Моноширинные шрифты

Для удобства чтения кода используйте моноширинные шрифты. Примеры хороших шрифтов:
*   Source Code Pro
*   Inconsolata
*   Anonymous Pro

Ссылки для скачивания обычно можно найти на GitHub или сайтах разработчиков.

#### Командные оболочки (Shell)

Оболочка — это интерпретатор команд, с которым вы взаимодействуете в терминале.

*   **bash (Bourne-Again SHell):** Универсальный и стандартный выбор. Идеален для разнородной инфраструктуры.
*   **zsh (Z Shell):** Обладает расширенными возможностями и поддержкой плагинов (например, Oh My Zsh). Хорош для локальной разработки и контролируемой инфраструктуры.
*   **fish (Friendly Interactive SHell):** Современный shell с богатым функционалом и удобной автодополнением по умолчанию.

**Oh My Zsh** — фреймворк для управления конфигурацией zsh, который предоставляет множество тем, плагинов и функций.

### 2. Азы командной строки

#### Основы навигации и справки

*   `which <команда>`, `type <команда>` — показывают путь к исполняемому файлу команды.
*   `man <команда>` — выводит руководство (manual) по команде. Для навигации в `man` (который использует `less`) полезны клавиши:
    *   `h` — помощь
    *   `PgUp`, `PgDn`, `↑`, `↓` — прокрутка
    *   `/KEYWORD` — поиск
    *   `n` / `N` — следующее/предыдущее совпадение
    *   `g` / `G` — переход в начало/конец документа
*   `man bash` — содержит информацию о встроенных командах (shell builtins) и настройках строки ввода (readline).

#### Управление процессами

*   `Ctrl+C` — послать сигнал `SIGINT` (прерывание процесса).
*   `Ctrl+Z` — послать сигнал `SIGTSTP` (приостановка процесса).
*   `fg` — вернуть приостановленный процесс на передний план (foreground).
*   `bg` — запустить приостановленный процесс в фоне (background).
*   `stty -a` — показать настройки терминала.

#### Управление вводом и выводом (I/O Redirection)

*   `stdin` (0) — стандартный поток ввода.
*   `stdout` (1) — стандартный поток вывода.
*   `stderr` (2) — стандартный поток ошибок.

**Примеры перенаправления:**
*   `команда > файл` — записать `stdout` в файл (перезаписать).
*   `команда >> файл` — дописать `stdout` в конец файла.
*   `команда 2> файл` — записать `stderr` в файл.
*   `команда 2>&1` — перенаправить `stderr` в `stdout`.
*   `команда | другая_команда` — передать `stdout` первой команды на `stdin` второй (`pipe`).
*   `/dev/null` — "черная дыра" для данных.

#### Помощники командной строки

*   **Автодополнение (Tab Completion):** Клавиша `Tab` — ваш лучший друг.
    *   `Tab` — дополнить команду или путь.
    *   `Tab Tab` — показать все возможные варианты дополнения.
*   **История команд (`~/.bash_history` или `~/.zsh_history`):**
    *   `Ctrl+R` — обратный поиск по истории.
    *   `history | grep <ключевое_слово>` — поиск по истории.
    *   `sudo !!` — выполнить предыдущую команду с `sudo`.

### 3. Полезные команды общего назначения

#### Ветвления, циклы и подоболочки (Subshell)

*   `;` — разделитель команд.
*   Циклы `while`, `for`.
*   `read` — встроенная команда для чтения ввода в переменные.
*   `$(команда)` или `` `команда` `` — подстановка команд (command substitution). Результат выполнения команды подставляется в строку.
*   `[` или `test` — команда для проверки условий в скриптах.

#### Многопоточность: `find` и `xargs`

*   `find` — мощный инструмент для поиска файлов и директорий.
*   `xargs` — строит и выполняет командные строки из входных данных с `stdin`.
*   `-P <N>` в `xargs` — запуск до N процессов параллельно.

**Пример:**
```bash
find /etc -type f -name "nginx*" | xargs -n1 md5sum
```
Этот пример найдет все файлы, начинающиеся с "nginx" в `/etc`, и подсчитает их MD5-хэш.

**Аналог:** `GNU parallel` — более мощный инструмент для параллельного выполнения задач.

#### Утилиты для долгих задач и сессий

*   `watch -d -n1 "команда"` — выполнять команду каждую секунду и подсвечивать различия.
*   `screen` / `tmux` — менеджеры терминальных сессий, которые позволяют отключаться от сессии и подключаться к ней снова.
    *   `screen`: Запуск — `screen`, детач — `Ctrl+A D`, список — `screen -ls`, подключение — `screen -r <сессия>`.
    *   `tmux`: Запуск — `tmux`, детач — `Ctrl+B D`, список — `tmux ls`, подключение — `tmux attach -t <сессия>`.

### 4. Редактирование текста

#### Текстовые редакторы

*   **Vim:** Мощный модальный редактор. Кривая обучения крутая, но эффективность высокая.
    *   `vimtutor` — встроенное интерактивное руководство.
    *   `:q!` — выход без сохранения (первое, что нужно запомнить).
*   **Emacs:** Другой мощный редактор с огромными возможностями. Выбор часто зависит от личных предпочтений.

#### Система контроля версий

*   **Git:** Стандарт де-факто для современной разработки. Обязателен для изучения.

### 5. Аналитика и потоковая обработка текста

**Важно:** Эти инструменты мощны, но не стоит строить на них критические продакшен-процессы без дополнительной надежности.

Основные инструменты конвейерной обработки (pipe):
*   `grep` — поиск по тексту с использованием регулярных выражений.
*   `awk` — язык для обработки текстовых данных, особенно с структурированными полями (например, колонками в логах).
*   `sed` — потоковый текстовый редактор (поиск, замена, удаление).
*   `cut` — извлечение определенных колонок из текста.
*   `head` / `tail` — вывод начала/конца файла.
*   `tr` — замена или удаление символов.
*   `wc` (word count) — подсчет строк, слов, байт.
*   `sort` — сортировка строк.
*   `uniq` — фильтрация повторяющихся строк.

**Пример из логов nginx:**
```bash
head /var/log/nginx/access.log | awk '{print $6}' | tr '\n' ','
```
Эта команда извлекает из начала файла логов (URL-пути) из 6-го столбца и объединяет их через запятую.

#### Тренажеры и практика

Существуют интерактивные тренажеры для оттачивания навыков работы с `grep`, `sed` и `awk`. Установить их можно через `pip`:
```bash
pip install grepexercises sedexercises awkexercises
```

Также отличным практическим заданием является текстовый квест **"The Command Line Murders"** (https://github.com/veltman/clmystery), где нужно использовать терминал для расследования.

### 6. Диагностика и поиск проблем

#### Ресурсы для углубленного изучения

*   **Brendan Gregg:** Авторитет в области производительности Linux. На его сайте (https://www.brendangregg.com/linuxperf.html) можно найти огромное количество материалов, включая диаграммы выбора инструментов.
*   **Книга "Systems Performance: Enterprise and the Cloud" (Brendan Gregg):** Исчерпывающее руководство (928 страниц).

#### Мини-топ полезных утилит

**Мониторинг системы и процессов:**
*   `top`, `htop` — интерактивный просмотр процессов и ресурсов.
*   `atop` — более продвинутый мониторинг, может записывать данные в файл.
*   `ps auxfw | less` — статический список процессов.
*   `pidof <имя_процесса>` — найти PID по имени.

**Диски и файловая система:**
*   `df -h` / `df -ih` — место на дисках / информация об inodes.
*   `du -sh <путь>` — размер директории.
*   `iostat -x 1` — статистика ввода-вывода.

**Сеть:**
*   `ss -s` / `netstat -ntlp` — статистика сокетов и прослушивающие порты.
*   `ping`, `traceroute`, `mtr` — диагностика сетевой связности.
*   `tcpdump` — "сниффер" сетевого трафика.
*   `ethtool <интерфейс>` — информация о сетевом интерфейсе.

**Разное:**
*   `lsof -i:<порт>` / `lsof -p <PID>` — список открытых файлов (включая сетевые соединения) для порта или процесса.
*   `strace -fp <PID>` / `strace <команда>` — трассировка системных вызовов.
*   `dmesg -T` — просмотр сообщений ядра.
*   `perf top` — профилирование системы в реальном времени.
*   `ulimit -a` — лимиты текущей сессии.

#### Мастер-класс по `curl`

Для глубокого понимания сетевой диагностики рекомендуется посмотреть мастер-класс от создателя `curl` Даниэля Стейнберга.

### Заключение

Работа в Linux-терминале — это ключевой навык для IT-специалистов. Освоение инструментов, представленных в лекции, 
позволяет эффективно решать повседневные задачи, от редактирования файлов до диагностики сложных проблем в системе. 
Практика и использование тренажеров — лучший способ закрепить эти знания.